-- Terms (약관) 테이블 생성
CREATE TABLE IF NOT EXISTS terms (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(16)))),
  type TEXT NOT NULL CHECK(type IN ('terms_of_service', 'privacy_policy')),
  title TEXT NOT NULL,
  content TEXT NOT NULL,
  version TEXT DEFAULT '1.0',
  effective_date TEXT NOT NULL,
  is_active INTEGER DEFAULT 1,
  created_at TEXT DEFAULT CURRENT_TIMESTAMP,
  updated_at TEXT DEFAULT CURRENT_TIMESTAMP
);

-- 서비스 이용약관 삽입
INSERT INTO terms (type, title, content, version, effective_date, is_active) VALUES (
  'terms_of_service',
  '서비스 이용약관',
  '<h2>제1장 총칙</h2>

<h3>제1조 (목적)</h3>
<p>이 약관은 광주 게임플라자(이하 "회사")가 제공하는 게임기기 예약 서비스(이하 "서비스")를 이용함에 있어 회사와 이용자의 권리, 의무 및 책임사항을 규정함을 목적으로 합니다.</p>

<h3>제2조 (정의)</h3>
<ol>
  <li>"서비스"란 회사가 제공하는 게임기기 예약 및 관련 제반 서비스를 의미합니다.</li>
  <li>"이용자"란 이 약관에 따라 회사가 제공하는 서비스를 받는 회원 및 비회원을 말합니다.</li>
  <li>"회원"이란 회사와 서비스 이용계약을 체결하고 이용자 아이디를 부여받은 이용자를 말합니다.</li>
  <li>"예약"이란 이용자가 원하는 시간에 게임기기를 이용하기 위해 사전에 신청하는 것을 말합니다.</li>
  <li>"게임기기"란 회사가 보유하고 있는 PS5, Nintendo Switch, 레이싱 시뮬레이터 등의 게임 장비를 말합니다.</li>
</ol>

<h3>제3조 (약관의 효력 및 변경)</h3>
<ol>
  <li>이 약관은 서비스 화면에 게시하거나 기타의 방법으로 이용자에게 공지함으로써 효력을 발생합니다.</li>
  <li>회사는 필요한 경우 관련 법령을 위배하지 않는 범위에서 이 약관을 변경할 수 있습니다.</li>
  <li>변경된 약관은 제1항과 같은 방법으로 공지함으로써 효력을 발생합니다.</li>
</ol>

<h2>제2장 회원가입 및 서비스 이용</h2>

<h3>제4조 (회원가입)</h3>
<ol>
  <li>회원가입은 이용자가 약관의 내용에 대하여 동의를 한 다음 회원가입 신청을 하고 회사가 이러한 신청에 대하여 승낙함으로써 체결됩니다.</li>
  <li>회원가입 시 제공하는 정보는 정확하고 최신의 정보여야 합니다.</li>
  <li>만 14세 미만의 아동은 회원가입을 할 수 없습니다.</li>
</ol>

<h3>제5조 (예약 서비스 이용)</h3>
<ol>
  <li>회원은 서비스를 통해 원하는 시간에 게임기기를 예약할 수 있습니다.</li>
  <li>예약은 선착순으로 진행되며, 1인당 최대 예약 가능 시간은 제한될 수 있습니다.</li>
  <li>예약 취소는 이용 시작 1시간 전까지 가능합니다.</li>
  <li>노쇼(No-show) 발생 시 향후 예약에 제한이 있을 수 있습니다.</li>
</ol>

<h3>제6조 (이용 요금)</h3>
<ol>
  <li>게임기기 이용 요금은 시간당 요금제로 운영됩니다.</li>
  <li>요금은 사전 공지 후 변경될 수 있습니다.</li>
  <li>이용 요금은 예약 시 또는 현장에서 결제할 수 있습니다.</li>
</ol>

<h2>제3장 회사와 이용자의 의무</h2>

<h3>제7조 (회사의 의무)</h3>
<ol>
  <li>회사는 안정적인 서비스 제공을 위해 노력합니다.</li>
  <li>회사는 이용자의 개인정보를 보호하기 위해 노력합니다.</li>
  <li>회사는 게임기기를 청결하고 안전한 상태로 유지합니다.</li>
</ol>

<h3>제8조 (이용자의 의무)</h3>
<ol>
  <li>이용자는 예약 시간을 준수해야 합니다.</li>
  <li>이용자는 게임기기를 소중히 다루어야 하며, 고의 또는 과실로 파손 시 배상 책임이 있습니다.</li>
  <li>이용자는 다른 이용자의 이용을 방해하거나 불쾌감을 주는 행위를 해서는 안 됩니다.</li>
  <li>이용자는 회사의 시설 이용 규칙을 준수해야 합니다.</li>
</ol>

<h2>제4장 기타</h2>

<h3>제9조 (손해배상)</h3>
<p>회사와 이용자는 서비스 이용과 관련하여 고의 또는 과실로 상대방에게 손해를 끼친 경우 이를 배상해야 합니다.</p>

<h3>제10조 (면책조항)</h3>
<ol>
  <li>회사는 천재지변 등 불가항력으로 인한 서비스 중단에 대해 책임을 지지 않습니다.</li>
  <li>회사는 이용자 간 또는 이용자와 제3자 간에 발생한 분쟁에 대해 책임을 지지 않습니다.</li>
</ol>

<h3>제11조 (준거법 및 관할법원)</h3>
<p>이 약관은 대한민국 법령에 따라 규율되고 해석되며, 회사와 이용자 간에 발생한 분쟁으로 소송이 제기되는 경우 광주지방법원을 관할법원으로 합니다.</p>

<p><br/><strong>부칙</strong><br/>
이 약관은 2025년 8월 15일부터 시행됩니다.</p>',
  '1.0',
  '2025-08-15',
  1
);

-- 개인정보처리방침 삽입
INSERT INTO terms (type, title, content, version, effective_date, is_active) VALUES (
  'privacy_policy',
  '개인정보처리방침',
  '<h2>제1조 (개인정보의 수집 항목 및 수집 방법)</h2>

<h3>1. 수집하는 개인정보 항목</h3>
<p>광주 게임플라자는 서비스 제공을 위해 다음과 같은 개인정보를 수집합니다.</p>

<h4>가. 회원가입 시 수집 항목</h4>
<ul>
  <li>필수항목: 이메일 주소, 비밀번호, 이름, 휴대전화번호, 생년월일</li>
  <li>선택항목: 프로필 사진, 마케팅 수신 동의 여부</li>
</ul>

<h4>나. 서비스 이용 과정에서 자동 수집되는 정보</h4>
<ul>
  <li>접속 IP, 쿠키, 서비스 이용 기록, 기기 정보</li>
  <li>예약 내역, 이용 시간, 결제 정보</li>
</ul>

<h3>2. 개인정보 수집 방법</h3>
<ul>
  <li>홈페이지 회원가입 및 서비스 이용 과정</li>
  <li>Google OAuth 등 소셜 로그인</li>
  <li>고객센터를 통한 상담 과정</li>
</ul>

<h2>제2조 (개인정보의 수집 및 이용 목적)</h2>

<p>수집한 개인정보는 다음의 목적을 위해 활용합니다.</p>

<ol>
  <li><strong>서비스 제공</strong>: 게임기기 예약, 이용 관리, 결제 처리</li>
  <li><strong>회원 관리</strong>: 회원제 서비스 제공, 본인 확인, 부정 이용 방지</li>
  <li><strong>마케팅 및 광고</strong>: 이벤트 정보 제공, 맞춤형 서비스 제공 (동의한 경우에 한함)</li>
  <li><strong>서비스 개선</strong>: 서비스 이용 통계 분석, 서비스 품질 향상</li>
</ol>

<h2>제3조 (개인정보의 보유 및 이용 기간)</h2>

<p>회사는 원칙적으로 개인정보 수집 및 이용목적이 달성된 후에는 해당 정보를 지체 없이 파기합니다. 단, 다음의 정보에 대해서는 아래의 이유로 명시한 기간 동안 보존합니다.</p>

<h3>1. 회사 내부 방침에 의한 정보 보유</h3>
<ul>
  <li>부정 이용 기록: 1년</li>
  <li>예약 및 이용 기록: 3년</li>
</ul>

<h3>2. 관련 법령에 의한 정보 보유</h3>
<ul>
  <li>계약 또는 청약철회 등에 관한 기록: 5년 (전자상거래법)</li>
  <li>대금결제 및 재화 등의 공급에 관한 기록: 5년 (전자상거래법)</li>
  <li>소비자의 불만 또는 분쟁처리에 관한 기록: 3년 (전자상거래법)</li>
  <li>본인 확인에 관한 기록: 6개월 (정보통신망법)</li>
</ul>

<h2>제4조 (개인정보의 파기 절차 및 방법)</h2>

<h3>1. 파기 절차</h3>
<p>이용자의 개인정보는 목적이 달성된 후 별도의 DB로 옮겨져 내부 방침 및 기타 관련 법령에 의한 정보보호 사유에 따라 일정 기간 저장된 후 파기됩니다.</p>

<h3>2. 파기 방법</h3>
<ul>
  <li>전자적 파일 형태의 정보: 기록을 재생할 수 없는 기술적 방법을 사용하여 삭제</li>
  <li>종이에 출력된 개인정보: 분쇄기로 분쇄하거나 소각</li>
</ul>

<h2>제5조 (개인정보의 제3자 제공)</h2>

<p>회사는 이용자의 개인정보를 원칙적으로 외부에 제공하지 않습니다. 다만, 아래의 경우에는 예외로 합니다.</p>

<ol>
  <li>이용자들이 사전에 동의한 경우</li>
  <li>법령의 규정에 의거하거나, 수사 목적으로 법령에 정해진 절차와 방법에 따라 수사기관의 요구가 있는 경우</li>
</ol>

<h2>제6조 (개인정보의 안전성 확보 조치)</h2>

<p>회사는 개인정보의 안전성 확보를 위해 다음과 같은 조치를 취하고 있습니다.</p>

<ol>
  <li><strong>관리적 조치</strong>: 내부관리계획 수립·시행, 정기적 직원 교육</li>
  <li><strong>기술적 조치</strong>: 개인정보처리시스템 등의 접근권한 관리, 접근통제시스템 설치, 고유식별정보 등의 암호화, 보안프로그램 설치</li>
  <li><strong>물리적 조치</strong>: 전산실, 자료보관실 등의 접근통제</li>
</ol>

<h2>제7조 (이용자의 권리와 그 행사 방법)</h2>

<ol>
  <li>이용자는 언제든지 등록되어 있는 자신의 개인정보를 조회하거나 수정할 수 있습니다.</li>
  <li>이용자는 언제든지 개인정보 제공에 관한 동의철회/회원탈퇴를 요청할 수 있습니다.</li>
  <li>만 14세 미만 아동의 경우 법정대리인이 아동의 개인정보를 조회하거나 수정, 동의철회를 할 수 있습니다.</li>
</ol>

<h2>제8조 (개인정보보호 책임자)</h2>

<p>회사는 개인정보 처리에 관한 업무를 총괄해서 책임지고, 개인정보 처리와 관련한 이용자의 불만처리 및 피해구제 등을 위하여 아래와 같이 개인정보보호 책임자를 지정하고 있습니다.</p>

<ul>
  <li>성명: 홍길동</li>
  <li>직책: 개인정보보호 책임자</li>
  <li>연락처: privacy@gameplaza.kr</li>
  <li>전화번호: 062-123-4567</li>
</ul>

<h2>제9조 (개인정보 처리방침의 변경)</h2>

<p>이 개인정보처리방침은 시행일로부터 적용되며, 법령 및 방침에 따른 변경내용의 추가, 삭제 및 정정이 있는 경우에는 변경사항의 시행 7일 전부터 공지사항을 통하여 고지할 것입니다.</p>

<p><br/><strong>부칙</strong><br/>
이 개인정보처리방침은 2025년 8월 15일부터 시행됩니다.</p>',
  '1.0',
  '2025-08-15',
  1
);