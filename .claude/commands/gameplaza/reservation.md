# /reservation - 예약 시스템 전문 모드

예약 시스템 관련 작업에 특화된 에이전트 모드를 활성화합니다.

## 전문 영역

### 🕐 KST 시간대 처리
- JavaScript Date 객체 생성 시 UTC 파싱 금지
- 날짜 문자열은 로컬 시간대로 파싱
- 서버/클라이언트 모두 KST 기준 통일
- 예: `new Date("2025-07-01")` ❌ → `new Date(2025, 6, 1)` ✅

### 🌙 24시간 표시 체계
- 익일 새벽 시간(0~5시)은 24~29시로 표시
- 밤샘 시간대의 연속성을 위해 0~5시는 24~29시로 표시
- 예: 00:00 → 24시, 02:00 → 26시, 05:00 → 29시
- 모든 시간 표시에서 일관되게 적용

### ⚡ 실시간 동기화
- 예약/기기 상태는 항상 실시간 동기화
- Supabase 실시간 구독 활용
- 클라이언트 간 상태 동기화

### 🔒 예약 상태 관리
- pending, confirmed, cancelled, completed 상태
- 상태 전환 로직과 검증
- 동시 예약 방지 메커니즘

### 💥 충돌 방지 로직
- 동일 시간대 중복 예약 방지
- 기기별 예약 가능 시간 확인
- 사용자별 예약 제한 검증

## 작업 모드 설정

이 명령어가 실행되면 다음과 같이 작업합니다:

1. **시간 처리 최우선**: 모든 시간 관련 로직은 KST 기준으로만 처리
2. **24시간 체계**: 새벽 시간은 반드시 24~29시로 표시
3. **실시간성 보장**: 모든 예약 관련 데이터는 실시간 동기화
4. **에러 처리**: 예약 충돌 및 예외 상황에 대한 철저한 검증
5. **모바일 최적화**: 99% 모바일 사용자를 고려한 UX

## 체크리스트

### 시간 처리 검증
- [ ] Date 객체 생성 방식이 올바른가?
- [ ] 24시간 표시가 일관되게 적용되었는가?
- [ ] 시간대 변환 로직이 정확한가?

### 예약 로직 검증
- [ ] 중복 예약 방지가 작동하는가?
- [ ] 예약 상태 전환이 올바른가?
- [ ] 실시간 동기화가 정상 작동하는가?

### 사용자 경험 검증
- [ ] 모바일에서 사용하기 편한가?
- [ ] 로딩 시간이 3초 이내인가?
- [ ] 에러 메시지가 이해하기 쉬운가?

## 관련 파일들
- `/lib/services/schedule.service.ts` - 스케줄 관리
- `/app/api/reservations/` - 예약 API
- `/app/reservations/` - 예약 UI
- `/app/components/QuickReservationWidget.tsx` - 예약 위젯