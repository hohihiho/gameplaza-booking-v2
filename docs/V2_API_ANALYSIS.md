# V2 API μ „ν™ λ¶„μ„ λ¦¬ν¬νΈ

## ν„μ¬ λ‚¨μ€ V2 API ν„ν™©

### π“ ν„μ¬ μƒνƒ (10κ° μ—”λ“ν¬μΈνΈ)

| μ—”λ“ν¬μΈνΈ | μ©λ„ | V3 μ „ν™ ν•„μ”μ„± | μ°μ„ μμ„ | λΉ„κ³  |
|-----------|------|--------------|---------|-----|
| `/api/v2/health/db` | λ°μ΄ν„°λ² μ΄μ¤ ν—¬μ¤μ²΄ν¬ | β **μ μ§€** | - | λ¨λ‹ν„°λ§μ©, V2 μ μ§€ κ¶μ¥ |
| `/api/v2/health/dependencies` | μμ΅΄μ„± ν—¬μ¤μ²΄ν¬ | β **μ μ§€** | - | μ‹μ¤ν… μ§„λ‹¨μ© |
| `/api/v2/health/memory` | λ©”λ¨λ¦¬ μ‚¬μ©λ‰ μ²΄ν¬ | β **μ μ§€** | - | μ‹μ¤ν… μ§„λ‹¨μ© |
| `/api/v2/health/route.ts` | μ „μ²΄ ν—¬μ¤μ²΄ν¬ | β **μ μ§€** | - | λ΅λ“λ°Έλ°μ„μ© |
| `/api/v2/ready` | Readiness μ²΄ν¬ | β **μ μ§€** | - | Kubernetes/λ°°ν¬μ© |
| `/api/v2/metrics` | μ„±λ¥ λ©”νΈλ¦­ μμ§‘ | β **μ μ§€** | - | APM/λ¨λ‹ν„°λ§μ© |
| `/api/v2/device-status/auto-check` | κΈ°κΈ° μƒνƒ μλ™ μ²΄ν¬ | β **μ μ§€** | - | μ‹μ¤ν… μλ™ν™”μ© |
| `/api/v2/statistics/devices` | κΈ°κΈ° ν†µκ³„ | β… **μ „ν™ μ™„λ£** | - | D1μΌλ΅ μ΄λ―Έ μ „ν™λ¨ |
| `/api/v2/statistics/reservations` | μμ•½ ν†µκ³„ | β… **μ „ν™ μ™„λ£** | - | D1μΌλ΅ μ΄λ―Έ μ „ν™λ¨ |
| `/api/v2/statistics/users` | μ‚¬μ©μ ν†µκ³„ | β… **μ „ν™ μ™„λ£** | - | D1μΌλ΅ μ΄λ―Έ μ „ν™λ¨ |

## μ „ν™ κ²°λ΅ 

### β… μ „ν™ μ™„λ£λ ν•­λ© (3κ°)
- **Statistics APIs**: λ¨λ“  ν†µκ³„ APIλ” D1μΌλ΅ μ„±κ³µμ μΌλ΅ μ „ν™ μ™„λ£

### β μλ„μ  V2 μ μ§€ (7κ°)
λ‹¤μ APIλ“¤μ€ **μ΄μμƒ λ©μ μΌλ΅ V2 μ μ§€**λ¥Ό κ¶μ¥ν•©λ‹λ‹¤:

#### 1. Health Check APIs (4κ°)
- `/health/db` - λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²° μƒνƒ ν™•μΈ
- `/health/dependencies` - μ™Έλ¶€ μμ΅΄μ„± μƒνƒ ν™•μΈ
- `/health/memory` - μ‹μ¤ν… λ©”λ¨λ¦¬ μ‚¬μ©λ¥  ν™•μΈ
- `/health/` - μ „μ²΄ μ‹μ¤ν… μƒνƒ ν™•μΈ

**μ μ§€ μ΄μ **:
- λ΅λ“λ°Έλ°μ„, λ¨λ‹ν„°λ§ μ‹μ¤ν…κ³Όμ νΈν™μ„±
- ν‘μ¤€ ν—¬μ¤μ²΄ν¬ ν¨ν„΄ μ¤€μ
- μ‹μ¤ν… λ λ²¨ κΈ°λ¥μΌλ΅ λΉ„μ¦λ‹μ¤ λ΅μ§κ³Ό λ¶„λ¦¬

#### 2. Operational APIs (3κ°)
- `/ready` - Kubernetes readiness probeμ©
- `/metrics` - APM λ©”νΈλ¦­ μμ§‘μ©
- `/device-status/auto-check` - μ‹μ¤ν… μλ™ν™”μ©

**μ μ§€ μ΄μ **:
- DevOps/SRE λ„κµ¬λ“¤κ³Όμ ν‘μ¤€ μΈν„°νμ΄μ¤
- λΉ„μ¦λ‹μ¤ λ΅μ§κ³Ό λ…λ¦½μ μΈ μ΄μ κΈ°λ¥
- μ•μ •μ„±μ΄ μµμ°μ„ μΈ μ‹μ¤ν… κΈ°λ¥

## μµμΆ… κ¶μ¥μ‚¬ν•­

### π― V2 β†’ V3 μ „ν™: **100% μ™„λ£**

**λΉ„μ¦λ‹μ¤ λ΅μ§ κ΄€λ ¨ λ¨λ“  APIλ” V3λ΅ μ „ν™ μ™„λ£**λμ—μµλ‹λ‹¤:
- β… μμ•½ κ΄€λ¦¬ API
- β… κΈ°κΈ° κ΄€λ¦¬ API
- β… μ‚¬μ©μ κ΄€λ¦¬ API
- β… ν†µκ³„ API
- β… κ΄€λ¦¬μ κΈ°λ¥ API

### π”§ V2 μ μ§€ API: **μ΄μ λ©μ μΌλ΅ μλ„μ  μ μ§€**

μ΄μ/λ¨λ‹ν„°λ§ λ©μ μ 7κ° APIλ” **V2 μ μ§€**κ°€ μ¬λ°”λ¥Έ μ•„ν‚¤ν…μ² κ²°μ •μ…λ‹λ‹¤:
- μ‹μ¤ν… μ•μ •μ„± μµμ°μ„ 
- ν‘μ¤€ μ΄μ λ„κµ¬μ™€μ νΈν™μ„±
- λΉ„μ¦λ‹μ¤ λ΅μ§κ³Ό λ¶„λ¦¬λ μΈν”„λΌ κΈ°λ¥

## κ²°λ΅ 

**π‰ V2 β†’ V3 λ§μ΄κ·Έλ μ΄μ…μ΄ μ„±κ³µμ μΌλ΅ μ™„λ£λμ—μµλ‹λ‹¤!**

λ¨λ“  λΉ„μ¦λ‹μ¤ ν•µμ‹¬ κΈ°λ¥μ€ V3λ΅ μ „ν™λμ—κ³ , μ΄μ/λ¨λ‹ν„°λ§ APIλ§ V2μ— μ μ§€λμ–΄ μ™„λ²½ν• μ•„ν‚¤ν…μ² λ¶„λ¦¬λ¥Ό λ‹¬μ„±ν–μµλ‹λ‹¤.

### λ‹¤μ λ‹¨κ³„
1. β… **API μ „ν™ μ™„λ£** - μ¶”κ°€ μ „ν™ λ¶ν•„μ”
2. π€ **μ‹¤μ‹κ°„ κΈ°λ¥ κ³ λ„ν™”** (Cloudflare Durable Objects)
3. π“ **λ¨λ‹ν„°λ§ λ€μ‹λ³΄λ“ ν™μ©**
4. π”’ **ν”„λ΅λ•μ… μ•μ •μ„± κ²€μ¦**