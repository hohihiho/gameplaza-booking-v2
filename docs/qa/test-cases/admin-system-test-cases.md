# 👑 관리자 시스템 테스트 케이스

## 📋 문서 개요

이 문서는 광주 게임플라자 관리자 시스템의 **세부 기능별 테스트 케이스**를 정리합니다.
관리자 시스템은 **8개 주요 메뉴**와 **수십 개 세부 기능**으로 구성되어 있으며, 각각에 대한 **정상 케이스**와 **예외 케이스**를 모두 포함합니다.

**총 36개 테스트 케이스 (TC-A001 ~ TC-A036)**로 구성되어 있습니다.

## 🎯 테스트 목표

- **권한 관리**: 관리자별 접근 권한 정확성 검증
- **데이터 무결성**: 관리자 작업의 데이터 정확성 보장
- **실시간 동기화**: 여러 관리자 동시 작업 시 충돌 방지
- **사용자 경험**: 관리자 업무 효율성 및 직관성 검증

---

## 🔐 1. 관리자 권한 시스템 테스트

### 1.1 권한 인증 테스트

#### **TC-A001: 관리자 권한 검증**
```
전제조건: 로그인된 상태
테스트 단계:
1. 일반 사용자로 /admin URL 직접 접근
2. 관리자 권한 없는 계정으로 접근
3. 세션 만료된 관리자 계정 접근
4. /api/auth/check-admin API 직접 호출

예상 결과:
✅ 일반 사용자: 홈페이지로 자동 리다이렉트
✅ 권한 없음: "접근 권한이 없습니다" 메시지
✅ 세션 만료: 로그인 페이지로 리다이렉트
✅ API 직접 호출: 401/403 HTTP 상태 코드

예외 케이스:
❌ 권한 체크 API 응답 지연 (5초 이상)
❌ 권한 체크 실패 시 무한 로딩
❌ 리다이렉트 루프 발생
```

#### **TC-A002: 슈퍼관리자 전용 기능**
```
테스트 데이터:
- 일반 관리자 계정: admin@test.com
- 슈퍼관리자 계정: ndz5496@gmail.com

테스트 단계:
1. 일반 관리자로 "관리자 관리" 메뉴 접근
2. 일반 관리자로 시스템 설정 변경 시도
3. 슈퍼관리자로 동일 기능 접근

예상 결과:
✅ 일반 관리자: 메뉴 숨김 또는 접근 차단
✅ 슈퍼관리자: 모든 기능 접근 가능
✅ 권한별 UI 다르게 표시

예외 케이스:
❌ 권한 체크 우회로 일반 관리자가 접근
❌ 슈퍼관리자 목록 수정 가능
❌ 권한 변경이 실시간 반영되지 않음
```

### 1.2 세션 관리 테스트

#### **TC-A003: 관리자 세션 타임아웃**
```
테스트 단계:
1. 관리자 로그인 후 30분간 비활성 상태
2. 세션 만료 후 관리자 기능 사용 시도
3. 작업 중 세션 만료 상황

예상 결과:
✅ 자동 로그아웃 후 로그인 페이지 이동
✅ 진행 중인 작업 데이터 보존 (가능한 경우)
✅ 보안 관련 작업은 즉시 차단

예외 케이스:
❌ 세션 만료 후에도 관리자 기능 동작
❌ 작업 중 세션 만료로 데이터 손실
❌ 새로고침 후 세션 복구 실패
```

---

## 📊 2. 관리자 대시보드 테스트

### 2.1 실시간 통계 표시

#### **TC-A004: 대시보드 데이터 로딩**
```
테스트 항목:
- 오늘 매출: revenue.value, revenue.trend
- 예약 현황: reservations.total, reservations.pending
- 현재 이용: currentlyUsing.using, currentlyUsing.waiting
- 기기 현황: devices.available, devices.total, devices.maintenance

테스트 단계:
1. 관리자 대시보드 접근
2. 데이터 로딩 시간 측정
3. 각 통계 수치 정확성 확인
4. 30초 후 자동 새로고침 확인

예상 결과:
✅ 초기 로딩 시간 3초 이내
✅ 모든 통계 데이터 정확 표시
✅ 30초 간격 자동 업데이트
✅ 트렌드 화살표 정확한 방향 표시

예외 케이스:
❌ /api/admin/dashboard API 타임아웃
❌ 통계 계산 오류 (음수 값, null 값)
❌ 자동 새로고침 중단
❌ 여러 관리자 접속 시 서버 부하
```

#### **TC-A005: 최근 예약 목록**
```
테스트 단계:
1. 최근 예약 5건 표시 확인
2. 예약 상태별 색상 구분 확인
3. 새 예약 발생 시 실시간 업데이트
4. 예약 클릭 시 상세 페이지 이동

예상 결과:
✅ 최신 순으로 5건 표시
✅ 상태별 뱃지 색상 일관성
✅ 실시간 목록 업데이트
✅ 예약 상세 정보 정확한 표시

예외 케이스:
❌ 예약 데이터 없을 때 빈 화면
❌ 긴 사용자명/기기명으로 레이아웃 깨짐
❌ 실시간 업데이트 중 화면 깜빡임
❌ 상세 페이지 이동 시 404 오류
```

### 2.2 대시보드 성능 테스트

#### **TC-A006: 대용량 데이터 처리**
```
테스트 조건:
- 예약 데이터: 1000건 이상
- 동시 접속 관리자: 10명
- 실시간 업데이트: 초당 5회

테스트 단계:
1. 대용량 데이터 환경에서 대시보드 로딩
2. 여러 관리자 동시 접속
3. 빈번한 실시간 업데이트 상황

예상 결과:
✅ 로딩 시간 5초 이내 유지
✅ 메모리 사용량 안정적 유지
✅ 실시간 업데이트 지연 없음

예외 케이스:
❌ 메모리 누수로 브라우저 느려짐
❌ 통계 계산으로 DB 락 발생
❌ WebSocket 연결 실패로 실시간 업데이트 중단
```

---

## 📋 3. 관리자 예약 관리 테스트

### 3.1 예약 승인/거절 프로세스

#### **TC-A007: 예약 승인 처리**
```
테스트 데이터:
- 대기 중인 예약 ID: res_001
- 승인 관리자: admin@test.com
- 예약 시간: 내일 14:00-16:00

테스트 단계:
1. 대기 중인 예약 목록 확인
2. 예약 상세 정보 검토
3. "승인" 버튼 클릭
4. 승인 후 상태 변경 확인

예상 결과:
✅ 예약 상태: pending → approved
✅ 사용자에게 승인 알림 발송
✅ 기기 상태 예약됨으로 변경
✅ 승인 로그 기록

예외 케이스:
❌ 승인 중 다른 관리자가 거절 처리
❌ 승인 후 기기 상태 업데이트 실패
❌ 알림 발송 실패
❌ 동일 시간대 다른 예약과 충돌
```

#### **TC-A008: 예약 거절 처리**
```
테스트 단계:
1. 대기 중인 예약 선택
2. 거절 사유 입력 모달 확인
3. 사유 입력 후 거절 처리
4. 거절 알림 발송 확인

예상 결과:
✅ 거절 사유 필수 입력 검증
✅ 예약 상태: pending → rejected
✅ 사용자에게 거절 사유와 함께 알림
✅ 해당 시간대 다시 예약 가능

예외 케이스:
❌ 거절 사유 없이 처리 가능
❌ 거절 후 해당 시간대 예약 불가 유지
❌ 거절 알림에 사유 누락
❌ 거절 처리 후 데이터 복구 불가
```

### 3.2 예약 목록 관리

#### **TC-A009: 예약 필터링 및 검색**
```
테스트 항목:
- 상태별 필터: 전체, 대기중, 승인됨, 완료, 취소
- 날짜 범위 검색: 특정 기간 예약
- 사용자명 검색: 부분 일치 검색
- 기기명 검색: 기기 타입별 필터

테스트 단계:
1. 각 필터 옵션별로 결과 확인
2. 검색어 입력 시 실시간 필터링
3. 여러 필터 조합 사용
4. 페이지네이션 동작 확인

예상 결과:
✅ 필터 조건에 맞는 정확한 결과
✅ 실시간 검색 결과 업데이트
✅ 페이지네이션 올바른 동작
✅ 필터 초기화 기능 동작

예외 케이스:
❌ 필터 적용 시 결과 없음 상태 처리
❌ 검색 중 타이핑 지연으로 성능 문제
❌ 여러 필터 조합 시 충돌
❌ 페이지 이동 시 필터 설정 초기화
```

#### **TC-A010: 실시간 예약 동기화**
```
테스트 시나리오:
1. 관리자 A와 B가 동시에 예약 관리 페이지 접속
2. A가 예약 승인 처리
3. B의 화면에서 실시간 업데이트 확인
4. 새로운 예약 신청 발생 시 실시간 반영

예상 결과:
✅ 다른 관리자 작업 즉시 반영
✅ 새 예약 실시간 목록 추가
✅ 상태 변경 즉시 동기화
✅ 중복 처리 방지

예외 케이스:
❌ WebSocket 연결 실패로 동기화 중단
❌ 네트워크 지연으로 중복 처리
❌ 실시간 업데이트 중 화면 깜빡임
❌ 대용량 업데이트로 브라우저 느려짐
```

---

## 🎮 4. 관리자 기기 관리 테스트

### 4.1 3단계 계층 구조 관리

#### **TC-A011: 카테고리 관리**
```
테스트 데이터:
- 기존 카테고리: SEGA, KONAMI, BANDAI NAMCO
- 새 카테고리: TAITO

테스트 단계:
1. 새 카테고리 "TAITO" 추가
2. 카테고리 순서 변경 (드래그앤드롭)
3. 카테고리 이름 수정
4. 하위 기종이 있는 카테고리 삭제 시도

예상 결과:
✅ 카테고리 추가/수정/삭제 정상 동작
✅ 순서 변경 즉시 반영
✅ 하위 데이터 있는 경우 삭제 방지
✅ 변경사항 실시간 다른 관리자에게 동기화

예외 케이스:
❌ 중복 카테고리명 허용
❌ 카테고리 삭제 시 하위 기종 고아 데이터 생성
❌ 순서 변경 중 드래그 실패
❌ 카테고리명에 특수문자/HTML 허용
```

#### **TC-A012: 기종 관리**
```
테스트 항목:
- 기종 추가: 이름, 설명, 플레이 모드, 가격
- 모델명/버전명 설정 (선택사항)
- 대여 가능 여부 토글
- 보유 대수 설정 시 개별 기기 자동 생성

테스트 단계:
1. 새 기종 "maimai DX PLUS" 추가
2. 플레이 모드 "Standard(500원)", "DX(1000원)" 설정
3. 보유 대수 4대 설정
4. 개별 기기 자동 생성 확인

예상 결과:
✅ 기종 정보 정확히 저장
✅ 설정한 대수만큼 개별 기기 생성 (#1, #2, #3, #4)
✅ 플레이 모드별 가격 정확히 설정
✅ 대여 가능 토글 정상 동작

예외 케이스:
❌ 음수 대수 입력 허용
❌ 플레이 모드 가격에 음수 허용
❌ 기종 추가 중 시스템 오류로 불완전한 데이터 생성
❌ 대수 변경 시 기존 예약과 충돌
```

#### **TC-A013: 개별 기기 상태 관리**
```
테스트 데이터:
- 기기 ID: maimai_dx_001
- 현재 상태: available
- 변경할 상태: maintenance

테스트 단계:
1. 개별 기기 상태를 maintenance로 변경
2. 해당 기기 예약 가능 목록에서 제외 확인
3. 사용 중인 기기 상태 변경 시도
4. 상태 변경 로그 기록 확인

예상 결과:
✅ 상태 변경 즉시 반영
✅ 예약 시스템에서 해당 기기 제외
✅ 사용 중인 기기는 변경 방지 또는 경고
✅ 상태 변경 이력 로그 기록

예외 케이스:
❌ 예약된 기기 상태 강제 변경 허용
❌ 상태 변경이 예약 시스템에 미반영
❌ 여러 관리자 동시 상태 변경으로 충돌
❌ 상태 변경 로그 누락
```

### 4.2 대여 설정 연동

#### **TC-A014: 대여가능 설정 동기화**
```
테스트 시나리오:
1. 기기 관리에서 기종의 "대여가능" 체크박스 해제
2. 대여기기관리 페이지에서 해당 기종 상태 확인
3. 실시간 예약 가능 기기 목록 업데이트 확인
4. 기존 예약에 미치는 영향 확인

예상 결과:
✅ 대여기기관리에서 즉시 비활성화
✅ 새 예약에서 해당 기기 선택 불가
✅ 기존 예약은 유지, 새 예약만 차단
✅ 설정 변경 즉시 반영 (저장 버튼 없음)

예외 케이스:
❌ 대여 설정 변경이 다른 시스템에 미반영
❌ 기존 예약 취소 없이 기기 비활성화
❌ 설정 변경 중 시스템 오류로 불일치 상태
❌ 캐시 문제로 변경사항 지연 반영
```

---

## ✅ 5. 관리자 체크인 관리 테스트

### 5.1 체크인 프로세스 검증

#### **TC-A015: 체크인 권한 및 시점 검증**
```
테스트 조건:
- 예약 시간: 14:00-16:00
- 현재 시간: 13:00 (1시간 전)
- 예약 상태: approved

테스트 단계:
1. 예약 시작 2시간 전 체크인 시도
2. 예약 시작 1시간 전 체크인 시도
3. 예약 시작 후 체크인 시도
4. 이미 체크인된 예약 재처리 시도

예상 결과:
✅ 2시간 전: "체크인 시간이 아닙니다" 메시지
✅ 1시간 전: 체크인 버튼 활성화
✅ 시작 후: 정상 체크인 가능
✅ 중복 처리: "이미 체크인된 예약입니다" 방지

예외 케이스:
❌ 시간 계산 오류로 잘못된 시점에 체크인 허용
❌ 거절된 예약의 체크인 시도 허용
❌ 체크인 처리 중 예약 상태 변경으로 충돌
❌ 체크인 시간 검증 우회 가능
```

#### **TC-A016: 기기 자동 배정**
```
테스트 시나리오:
1. 마이마이 DX 예약 (기기 번호 미지정)
2. 체크인 처리 시 사용 가능한 기기 자동 배정
3. 지정된 기기가 고장 상태인 경우
4. 모든 기기가 사용 중인 경우

예상 결과:
✅ 사용 가능한 기기 중 자동 배정
✅ 고장 기기는 배정에서 제외
✅ 사용 중인 기기 제외하고 배정
✅ 배정 가능한 기기 없으면 대기 상태

예외 케이스:
❌ 고장난 기기도 배정 대상에 포함
❌ 이미 사용 중인 기기 중복 배정
❌ 기기 배정 실패 시 체크인 중단
❌ 기기 상태와 배정 시스템 간 동기화 실패
```

### 5.2 결제 및 금액 관리

#### **TC-A017: 결제 방법 선택 및 처리**
```
테스트 케이스:
- 결제 방법: 현금, 계좌이체
- 원래 금액: 8,000원
- 조정 금액: 7,000원 (1시간 단축)

테스트 단계:
1. 체크인 후 결제 방법 "계좌이체" 선택
2. 계좌번호 보기 링크 클릭
3. 결제 확인 처리
4. 결제 방법을 "현금"으로 변경

예상 결과:
✅ 계좌번호 모달 팝업 정상 표시
✅ 계좌번호 복사 기능 동작
✅ 결제 확인 후 상태 변경 (paid)
✅ 결제 방법 변경 가능

예외 케이스:
❌ 계좌번호 복사 실패 (클립보드 접근 거부)
❌ 결제 확인 중 관리자 세션 만료
❌ 결제 방법 변경 시 금액 재계산 오류
❌ 결제 상태 변경 실패로 중간 상태 유지
```

#### **TC-A018: 시간 및 금액 조정**
```
테스트 조건:
- 원래 시간: 14:00-16:00 (2시간)
- 원래 금액: 8,000원
- 조정 요청: 15:30 종료 (1.5시간)

테스트 단계:
1. 종료 시간을 15:30으로 조정
2. 조정 사유 "고객 요청으로 30분 단축" 입력
3. 금액을 6,000원으로 수동 조정
4. 조정 내역 저장 및 이력 확인

예상 결과:
✅ 종료 시간 조정 성공
✅ 조정 사유 필수 입력 검증
✅ 금액 수동 조정 가능
✅ 조정 이력 로그 기록

예외 케이스:
❌ 종료 시간을 시작 시간보다 이전으로 설정
❌ 조정 사유 없이 저장 가능
❌ 음수 금액 입력 허용
❌ 조정 후 다른 예약과 시간 충돌
```

### 5.3 노쇼 및 예외 상황 처리

#### **TC-A019: 노쇼 처리**
```
테스트 단계:
1. 예약 시간 30분 경과 후에도 미체크인 상태
2. "노쇼" 버튼 클릭
3. 기기 상태 자동 복구 확인
4. 사용자에게 노쇼 알림 발송 확인

예상 결과:
✅ 예약 상태: approved → no_show
✅ 배정된 기기 상태: available로 복구
✅ 해당 시간대 다른 예약 가능
✅ 사용자에게 노쇼 알림 발송

예외 케이스:
❌ 노쇼 처리 후 기기 상태 복구 실패
❌ 노쇼 처리 중 고객이 동시에 체크인
❌ 노쇼 알림 발송 실패
❌ 노쇼 처리 후 데이터 복구 불가
```

---

## 📊 6. 관리자 통계/분석 테스트

### 6.1 예약 통계 정확성

#### **TC-A020: 통계 데이터 계산 검증**
```
테스트 데이터:
- 기간: 최근 30일
- 총 예약: 150건 (승인 120건, 거절 20건, 취소 10건)
- 시간대: 조기영업 40건, 일반 60건, 밤샘 20건
- 기기별: 마이마이 80건, 볼텍스 40건

테스트 단계:
1. 통계 페이지에서 30일 필터 선택
2. 전체 통계 수치 확인
3. 대기/거절/취소 상태 제외 처리 확인
4. 시간대별 분포 차트 확인

예상 결과:
✅ 총 예약: 120건 (승인된 것만 집계)
✅ 24-29시 시간 표시 정확
✅ 기기별 통계 정확한 집계
✅ 차트 데이터와 수치 일치

예외 케이스:
❌ 거절/취소 예약이 통계에 포함
❌ 24-29시 변환 오류로 중복 집계
❌ 시간대별 집계에서 경계 시간 오류
❌ 기기 이름 변경 시 통계 불일치
```

#### **TC-A021: 대용량 통계 처리**
```
테스트 조건:
- 예약 데이터: 10,000건
- 조회 기간: 12개월
- 동시 조회 관리자: 5명

테스트 단계:
1. 12개월 통계 조회
2. 응답 시간 측정
3. 메모리 사용량 모니터링
4. 여러 관리자 동시 조회

예상 결과:
✅ 응답 시간 10초 이내
✅ 메모리 사용량 안정적 유지
✅ 동시 조회 시에도 정상 동작
✅ 브라우저 응답성 유지

예외 케이스:
❌ 응답 시간 30초 이상
❌ 메모리 누수로 브라우저 크래시
❌ 동시 조회로 서버 응답 없음
❌ 통계 계산 중 DB 락 발생
```

### 6.2 차트 및 시각화

#### **TC-A022: 차트 렌더링 테스트**
```
테스트 항목:
- Bar Chart: 기기별 예약 분포
- Line Chart: 일별 예약 추이
- Pie Chart: 시간대별 비율

테스트 단계:
1. 각 차트 타입별 정상 렌더링 확인
2. 데이터 없는 경우 빈 차트 처리
3. 차트 hover 인터랙션 확인
4. 모바일에서 차트 터치 동작

예상 결과:
✅ 모든 차트 정상 렌더링
✅ 데이터 없을 때 "데이터 없음" 표시
✅ hover 시 정확한 수치 표시
✅ 모바일 터치 인터랙션 정상

예외 케이스:
❌ Recharts 라이브러리 로딩 실패
❌ 다크모드 전환 시 차트 색상 오류
❌ 차트 데이터 업데이트 중 깜빡임
❌ 모바일에서 차트 터치 인식 실패
```

---

## 👥 7. 관리자 회원 관리 테스트

### 7.1 회원 목록 및 검색

#### **TC-A023: 회원 목록 조회**
```
테스트 조건:
- 전체 회원: 500명
- 페이지당 표시: 20명
- 필터: 전체, 블랙리스트, 관리자, 일반

테스트 단계:
1. 회원 관리 페이지 접근
2. 페이지네이션 동작 확인
3. 각 필터 옵션별 결과 확인
4. 회원 검색 기능 테스트

예상 결과:
✅ 20명씩 페이지 분할 표시
✅ 페이지 이동 정상 동작
✅ 필터별 정확한 회원 분류
✅ 이름/이메일 검색 정상 동작

예외 케이스:
❌ 대용량 회원 데이터로 로딩 지연
❌ 검색 성능 저하 (LIKE 쿼리 비효율)
❌ 페이지네이션 오류로 중복/누락 표시
❌ 필터 조합 시 결과 오류
```

#### **TC-A024: 회원 상세 정보**
```
테스트 데이터:
- 회원 ID: user_001
- 개인정보: 이메일, 닉네임, 전화번호
- 예약 이력: 총 15건 (완료 12건, 취소 3건)

테스트 단계:
1. 회원 목록에서 특정 회원 클릭
2. 회원 상세 페이지 이동
3. 개인정보 정확성 확인
4. 예약 이력 정확성 확인

예상 결과:
✅ 모든 개인정보 정확 표시
✅ 예약 이력 최신순 정렬
✅ 예약 상태별 색상 구분
✅ 총 예약 통계 정확

예외 케이스:
❌ 민감한 개인정보 과도 노출
❌ 예약 이력 일부 누락
❌ 다른 회원 정보 잘못 표시
❌ 상세 페이지 접근 권한 우회
```

### 7.2 블랙리스트 관리

#### **TC-A025: 블랙리스트 추가/해제**
```
테스트 단계:
1. 일반 회원을 블랙리스트에 추가
2. 블랙리스트 사유 입력
3. 블랙리스트 해제 처리
4. 블랙리스트 회원의 예약 제한 확인

예상 결과:
✅ 블랙리스트 추가 시 사유 필수 입력
✅ 해당 회원 예약 즉시 차단
✅ 기존 예약 자동 취소 또는 유지 선택
✅ 블랙리스트 해제 시 제한 해제

예외 케이스:
❌ 블랙리스트 사유 없이 처리 가능
❌ 블랙리스트 후에도 예약 가능
❌ 기존 예약 처리 정책 불일치
❌ 블랙리스트 해제 권한 검증 부족
```

---

## 📝 8. 관리자 콘텐츠 관리 테스트

### 8.1 노코드 편집기 기능

#### **TC-A026: 콘텐츠 블록 편집**
```
테스트 항목:
- 텍스트 블록: 제목, 본문, 정렬
- 이미지 블록: 업로드, 크기 조정, alt 텍스트
- 버튼 블록: 링크 설정, 스타일링
- 레이아웃: 컬럼, 스페이서, 구분선

테스트 단계:
1. 새 콘텐츠 페이지 생성
2. 각 블록 타입 추가 및 편집
3. 드래그앤드롭으로 순서 변경
4. 실시간 미리보기 확인

예상 결과:
✅ 모든 블록 타입 정상 추가
✅ 드래그앤드롭 순서 변경 동작
✅ 실시간 미리보기 정확한 반영
✅ 블록 설정 저장 정상

예외 케이스:
❌ 드래그앤드롭 중 블록 사라짐
❌ 이미지 업로드 실패 (파일 크기 초과)
❌ 미리보기와 실제 결과 불일치
❌ 블록 설정 저장 실패로 데이터 손실
```

#### **TC-A027: 반응형 편집 및 미리보기**
```
테스트 단계:
1. 데스크톱 뷰에서 콘텐츠 편집
2. 모바일 뷰로 전환하여 미리보기
3. 반응형 설정 조정
4. 실제 모바일 기기에서 확인

예상 결과:
✅ 데스크톱/모바일 뷰 전환 정상
✅ 반응형 레이아웃 정확한 표시
✅ 모바일 최적화 설정 적용
✅ 터치 인터페이스 정상 동작

예외 케이스:
❌ 뷰 전환 시 편집 내용 손실
❌ 모바일에서 레이아웃 깨짐
❌ 반응형 설정이 실제 적용 안됨
❌ 터치 이벤트 인식 실패
```

### 8.2 콘텐츠 보안 및 검증

#### **TC-A028: 악성 콘텐츠 필터링**
```
테스트 데이터:
- HTML 태그: "<script>alert('xss')</script>"
- 외부 스크립트: "<img src=x onerror=alert(1)>"
- 악성 링크: "javascript:alert('xss')"

테스트 단계:
1. 텍스트 블록에 스크립트 태그 입력
2. 이미지 블록에 악성 이미지 업로드 시도
3. 버튼 링크에 javascript: 프로토콜 입력
4. 저장 후 실제 페이지에서 확인

예상 결과:
✅ HTML 태그 자동 이스케이프
✅ 악성 스크립트 실행 방지
✅ 불안전한 링크 차단
✅ 보안 위험 요소 로그 기록

예외 케이스:
❌ XSS 스크립트 실행 허용
❌ 악성 파일 업로드 허용
❌ 보안 필터 우회 가능
❌ CSP 헤더 무효화
```

---

## ⚙️ 9. 관리자 설정 관리 테스트

### 9.1 시스템 설정 관리

#### **TC-A029: 계좌 정보 설정 (슈퍼관리자 전용)**
```
테스트 데이터:
- 은행: 국민은행
- 계좌번호: 123456-78-901234
- 예금주: 광주게임플라자
- 관리자 개인 계좌 옵션: 체크/해제

테스트 단계:
1. 슈퍼관리자로 시스템 설정 페이지 접근
2. "관리자 개인 계좌 사용" 체크박스 테스트
3. 계좌 정보 입력 및 저장
4. 일반 관리자 계정으로 설정 페이지 접근 시도
5. 체크인 페이지에서 계좌 정보 표시 확인

예상 결과:
✅ 슈퍼관리자만 계좌 정보 설정 섹션 표시
✅ 일반 관리자는 계좌 정보 섹션 숨김
✅ 개인 계좌 설정 시 관리자명 표시
✅ 계좌 정보 복사 기능 정상 동작
✅ 계좌 변경 이력 로그 기록

예외 케이스:
❌ 일반 관리자가 계좌 정보 접근 가능
❌ 계좌번호 복사 기능 실패
❌ 개인 계좌 설정이 체크인 시 미반영
❌ 권한 체크 우회로 접근 가능
```

#### **TC-A030: WiFi 정보 설정**
```
테스트 데이터:
- SSID: GamePlaza_5G
- 비밀번호: game1234
- 수정 데이터: GamePlaza_Guest / guest2025

테스트 단계:
1. WiFi 정보 편집 모드 진입
2. SSID와 비밀번호 변경
3. 저장 후 취소 기능 테스트
4. 체크인 완료 알림에서 WiFi 정보 확인
5. WiFi 정보 복사 기능 테스트

예상 결과:
✅ WiFi 정보 편집 및 저장 정상
✅ 취소 시 원래 값으로 복원
✅ 체크인 알림에 업데이트된 WiFi 정보 반영
✅ WiFi 정보 복사 기능 정상 동작

예외 케이스:
❌ 빈 SSID/비밀번호 허용
❌ 특수문자 포함 시 저장 오류
❌ 복사 기능 실패 (클립보드 접근 거부)
❌ 변경사항이 알림 템플릿에 미반영
```

#### **TC-A031: 영업시간 설정**
```
테스트 데이터:
- 평일: 10:00 - 22:00
- 주말: 10:00 - 24:00 (밤샘 영업)

테스트 단계:
1. 평일/주말 영업시간 편집
2. 종료 시간을 시작 시간보다 이전으로 설정 시도
3. 24시간 표기법으로 밤샘 영업 설정
4. 예약 시스템에 영업시간 반영 확인

예상 결과:
✅ 시간 형식 검증 (HH:MM)
✅ 시작/종료 시간 유효성 검증
✅ 24:00 이후 시간 허용 (밤샘 영업)
✅ 예약 가능 시간에 즉시 반영

예외 케이스:
❌ 종료 시간이 시작 시간보다 이전 허용
❌ 잘못된 시간 형식 입력 허용
❌ 영업시간 변경이 예약 시스템에 미반영
❌ 밤샘 시간대 처리 오류
```

#### **TC-A032: 예약 규칙 설정**
```
테스트 데이터:
- 사용자당 최대 예약: 3건
- 사전 예약 가능: 7일
- 취소 가능 시간: 24시간 전

테스트 단계:
1. 각 규칙 값 변경 (3→5, 7→14, 24→48)
2. 음수 값 입력 시도
3. 극한값 테스트 (0, 999)
4. 변경된 규칙이 예약 시스템에 반영 확인

예상 결과:
✅ 숫자 입력 검증 (양수만 허용)
✅ 합리적 범위 내 값만 허용
✅ 규칙 변경 즉시 예약 시스템 반영
✅ 변경 사항 저장 확인

예외 케이스:
❌ 음수나 0 입력 허용
❌ 비현실적 큰 값 허용 (999일 등)
❌ 규칙 변경이 예약 검증에 미반영
❌ 저장 실패 시 UI 상태 불일치
```

### 9.2 메시지 템플릿 관리

#### **TC-A033: 알림 메시지 템플릿**
```
테스트 템플릿:
- 예약 승인: "{name}님의 {date} {time} 예약이 승인되었습니다."
- 예약 거절: "죄송합니다. {reason}로 인해 예약이 거절되었습니다."
- 결제 요청: "{name}님! {time} 시간대의 {device} 이용을 위해 아래 계좌로 입금 부탁드립니다."
- 체크인 완료: "{name}님! 배정 기기: {device} #{number}, WiFi: {wifi_ssid} / {wifi_password}"

테스트 단계:
1. 각 템플릿의 변수 매핑 확인
2. 템플릿 복사 기능 테스트
3. 실제 알림 발송 시 변수 치환 확인
4. 긴 템플릿 메시지 처리 확인

예상 결과:
✅ 템플릿별 사용 가능한 변수 정확히 표시
✅ 복사 기능으로 템플릿 클립보드 저장
✅ 실제 알림에서 모든 변수 정확히 치환
✅ 읽기 전용 템플릿 보기 모드

예외 케이스:
❌ 존재하지 않는 변수 사용 시 오류 처리 부족
❌ 변수 치환 실패로 {name} 그대로 발송
❌ 복사 기능 실패 (클립보드 접근 거부)
❌ 긴 메시지로 레이아웃 깨짐
```

---

## 🔒 10. 관리자 시스템 보안 테스트

### 10.1 권한 상승 공격 방어

#### **TC-A034: JWT 토큰 조작 시도**
```
테스트 단계:
1. 정상 관리자 토큰 획득
2. 토큰 payload의 권한 정보 조작
3. 조작된 토큰으로 API 호출
4. 슈퍼관리자 권한 위조 시도

예상 결과:
✅ 토큰 서명 검증으로 조작 탐지
✅ 401 Unauthorized 응답
✅ 보안 로그에 시도 기록
✅ 해당 세션 즉시 무효화

예외 케이스:
❌ 토큰 조작 성공으로 권한 상승
❌ 서명 검증 우회 가능
❌ 보안 로그 기록 누락
❌ 조작 시도 후에도 세션 유지
```

#### **TC-A035: API 엔드포인트 직접 접근**
```
테스트 엔드포인트:
- /api/admin/users
- /api/admin/reservations
- /api/admin/settings

테스트 단계:
1. 일반 사용자 토큰으로 관리자 API 호출
2. 만료된 토큰으로 API 호출
3. 토큰 없이 API 호출
4. CORS 헤더 조작 시도

예상 결과:
✅ 권한 검증으로 접근 차단
✅ 적절한 HTTP 상태 코드 (401, 403)
✅ CORS 정책으로 교차 출처 차단
✅ Rate Limiting으로 대량 요청 차단

예외 케이스:
❌ 권한 검증 우회로 접근 성공
❌ CORS 정책 우회 가능
❌ Rate Limiting 무효화
❌ API 응답에 민감 정보 노출
```

### 10.2 입력 데이터 보안 검증

#### **TC-A036: SQL Injection 방어**
```
테스트 데이터:
- "'; DROP TABLE users; --"
- "1' OR '1'='1"
- "admin'; UPDATE admins SET role='super'--"

테스트 단계:
1. 회원 검색에 악성 쿼리 입력
2. 예약 관리 필터에 SQL 구문 입력
3. 설정 저장 시 SQL 인젝션 시도
4. 에러 메시지에서 DB 정보 노출 확인

예상 결과:
✅ 모든 입력 파라미터 이스케이프
✅ 준비된 구문(Prepared Statement) 사용
✅ 에러 메시지에 DB 정보 숨김
✅ 악의적 시도 로그 기록

예외 케이스:
❌ SQL 인젝션 성공으로 데이터 조작
❌ 에러 메시지에서 DB 스키마 노출
❌ 로그 우회로 시도 기록 누락
❌ 특수 문자 필터링 우회
```

---

## 📊 테스트 실행 가이드

### 테스트 실행 순서

**1단계: 기본 권한 테스트**
- TC-A001 ~ TC-A003: 관리자 권한 시스템
- TC-A034 ~ TC-A036: 보안 테스트

**2단계: 핵심 기능 테스트**
- TC-A004 ~ TC-A006: 대시보드
- TC-A007 ~ TC-A010: 예약 관리
- TC-A015 ~ TC-A019: 체크인 관리

**3단계: 데이터 관리 테스트**
- TC-A011 ~ TC-A014: 기기 관리
- TC-A020 ~ TC-A022: 통계 분석
- TC-A023 ~ TC-A025: 회원 관리

**4단계: 시스템 설정 테스트**
- TC-A026 ~ TC-A028: 콘텐츠 관리
- TC-A029 ~ TC-A033: 설정 관리

### 테스트 환경 설정

```bash
# 관리자 테스트 계정 생성
npm run test:create-admin-accounts

# 테스트 데이터 시딩
npm run test:seed-admin-data

# 관리자 테스트 실행
npm run test:admin-system

# 보안 테스트 실행
npm run test:admin-security
```

### 성능 기준

- **페이지 로딩**: 3초 이내
- **API 응답**: 1초 이내
- **실시간 동기화**: 100ms 이내
- **대량 데이터 처리**: 10초 이내

### 브라우저 지원

- **Desktop**: Chrome 90+, Firefox 88+, Safari 14+
- **Mobile**: iOS Safari 14+, Android Chrome 90+
- **해상도**: 1920x1080 (Desktop), 375x667 (Mobile) 기준

---

## 📞 문의 및 피드백

관리자 시스템 테스트 관련 문의:

- **QA 팀**: #qa-admin-system
- **보안 이슈**: security@gameplaza.com (비공개)
- **기능 개선**: GitHub Issues with label "admin-enhancement"

---

*마지막 업데이트: 2025-07-25*
*작성자: QA Team*
*리뷰어: Admin Team, Security Team*