# ⚙️ 기능 테스트 케이스

## 📋 문서 개요

이 문서는 광주 게임플라자 예약 시스템의 **핵심 비즈니스 로직**과 **기능적 요구사항**을 검증하는 테스트 케이스를 정리합니다.
사용자 관점에서의 **주요 기능 흐름**과 **시스템 통합 동작**을 중점적으로 다룹니다.

**총 30개 기능 테스트 케이스 (TC-F001 ~ TC-F030)**로 구성되어 있습니다.

## 🎯 테스트 목표

- **비즈니스 로직**: 예약 규칙과 제약조건 정확성 검증
- **데이터 플로우**: 사용자 입력부터 데이터 저장까지 전체 흐름
- **시스템 통합**: 프론트엔드, 백엔드, 데이터베이스 간 상호작용
- **실시간 동기화**: 여러 사용자 간 실시간 데이터 동기화

---

## 🔐 1. 사용자 인증 및 계정 관리

### 1.1 Google OAuth 인증 플로우

#### **TC-F001: Google 로그인 전체 플로우**
```
전제조건: 게임플라자 홈페이지 접근
테스트 단계:
1. "Google로 로그인" 버튼 클릭
2. Google 로그인 페이지에서 인증 완료
3. 게임플라자로 리다이렉트 후 세션 생성 확인
4. 사용자 정보 자동 생성 확인

예상 결과:
✅ Google OAuth 2.0 인증 성공
✅ 사용자 프로필 자동 생성 (이메일, 이름, 프로필 이미지)
✅ NextAuth v5 세션 정상 생성
✅ 홈페이지로 리다이렉트 후 로그인 상태 유지

테스트 데이터:
- Google 계정: test.user@gmail.com
- 예상 사용자 정보: 이름, 이메일, 구글 프로필 이미지
```

#### **TC-F002: 닉네임 설정 및 모더레이션**
```
전제조건: Google 로그인 완료, 닉네임 미설정 상태
테스트 단계:
1. 닉네임 설정 페이지 접근
2. 허용되는 닉네임 입력 ("게이머123")
3. 금지어 포함 닉네임 입력 시도 ("관리자")
4. 닉네임 중복 검사 확인
5. 최종 닉네임 저장

예상 결과:
✅ 허용 닉네임: 실시간 검증 통과
✅ 금지어 포함: "사용할 수 없는 닉네임입니다" 경고
✅ 중복 닉네임: "이미 사용 중인 닉네임입니다" 경고
✅ /api/moderation/check API 정상 호출
✅ 닉네임 저장 후 프로필 업데이트

테스트 데이터:
- 허용 닉네임: "게이머123", "플레이어ABC"
- 금지어: "관리자", "어드민", "욕설" (금지어 목록 확인)
- 중복 테스트: 기존 사용자와 동일한 닉네임
```

### 1.2 세션 관리 및 자동 로그인

#### **TC-F003: 세션 지속성 및 자동 로그인**
```
테스트 시나리오:
1. 로그인 후 브라우저 종료
2. 24시간 후 재접속
3. 새로운 탭에서 사이트 접근
4. 세션 만료 후 동작 확인

예상 결과:
✅ 24시간 내: 자동 로그인 유지
✅ 세션 만료 후: 로그인 페이지로 자동 리다이렉트
✅ 새 탭: 기존 세션 공유로 로그인 상태 유지
✅ 로그아웃 시: 모든 탭에서 세션 무효화

테스트 환경:
- 브라우저: Chrome, Safari, Firefox
- 기기: PC, 모바일
- 네트워크: WiFi, 4G
```

---

## 📅 2. 예약 시스템 핵심 기능

### 2.1 예약 생성 프로세스

#### **TC-F004: 기본 예약 생성 플로우**
```
전제조건: 로그인된 일반 사용자
테스트 단계:
1. "예약하기" 버튼 클릭 → /reservations/new 이동
2. 날짜 선택: 내일 날짜 선택
3. 시간대 선택: 14:00-16:00 (2시간)
4. 기기 선택: 마이마이 DX Plus
5. 플레이어 수 선택: 1명
6. 특별 요청사항 입력: "생일 이벤트"
7. 예약 신청 완료

예상 결과:
✅ 각 단계별 유효성 검증 통과
✅ 선택한 시간대에 기기 사용 가능 확인
✅ 예약 데이터 정확히 저장
✅ 상태: pending (관리자 승인 대기)
✅ 사용자에게 예약 신청 확인 알림

테스트 데이터:
- 예약 날짜: 현재 + 1일
- 시간대: 14:00-16:00 
- 기기: maimai_dx_plus_001
- 플레이어: 1명
- 특별요청: "생일 이벤트입니다"
```

#### **TC-F005: 24시간 제한 룰 검증**
```
테스트 시나리오:
1. 현재 시간: 2025-01-26 15:00
2. 예약 시도 시간: 2025-01-27 14:30 (23시간 30분 후)
3. 예약 시도 시간: 2025-01-27 15:30 (24시간 30분 후)

테스트 단계:
1. 23시간 30분 후 시간대 선택 시도
2. 24시간 30분 후 시간대 선택 시도
3. 경계값 테스트: 정확히 24시간 후

예상 결과:
✅ 23시간 30분 후: "24시간 이후 시간대만 선택 가능" 차단
✅ 24시간 30분 후: 선택 가능한 시간대로 표시
✅ 정확히 24시간 후: 선택 허용
✅ 서버/클라이언트 시간 일치 확인

테스트 포인트:
- KST 시간대 정확한 계산
- 서버 시간 기준 최종 검증
- 24-29시 표기법 정확성
```

#### **TC-F006: 밤샘 시간대 예약 (24-29시)**
```
테스트 데이터:
- 예약 시간: 25:00-27:00 (새벽 1시-3시)
- 날짜: 내일 밤샘 시간대

테스트 단계:
1. 날짜 선택 시 "밤샘 영업" 시간대 확인
2. 25:00(새벽1시) 시작 시간 선택
3. 27:00(새벽3시) 종료 시간 선택
4. 기기 선택 및 예약 완료
5. 예약 내역에서 시간 표기 확인

예상 결과:
✅ 25:00, 26:00, 27:00 시간 선택 가능
✅ 예약 내역: "25:00-27:00" 표기
✅ 실제 시간: 2025-01-27 01:00-03:00 저장
✅ 예약 확인서: "25시-27시" 표기

검증 항목:
- 24시간 제한 룰 적용 (24시간 후 예약 가능)
- 밤샘 시간대 표기 일관성
- 날짜 변경선 처리 정확성
```

### 2.2 예약 충돌 및 제약조건

#### **TC-F007: 기기 중복 예약 방지**
```
테스트 시나리오:
1. 사용자A: 마이마이 DX #1, 14:00-16:00 예약 (승인됨)
2. 사용자B: 동일한 기기, 15:00-17:00 예약 시도 (1시간 겹침)

테스트 단계:
1. 사용자A 예약 먼저 승인 처리
2. 사용자B가 겹치는 시간대 선택 시도
3. 시스템 충돌 감지 및 차단 확인
4. 대안 시간대 제안 확인

예상 결과:
✅ 겹치는 시간대 선택 시 경고 메시지
✅ "해당 시간에 선택한 기기를 사용할 수 없습니다"
✅ 사용 가능한 다른 시간대 또는 기기 제안
✅ 예약 생성 차단

검증 데이터:
- 기기 ID: maimai_dx_001
- 사용자A 예약: 14:00-16:00 (approved)
- 사용자B 시도: 15:00-17:00 (차단되어야 함)
```

#### **TC-F008: 사용자별 예약 한도 제한**
```
전제조건: 시스템 설정에서 "사용자당 최대 3건" 설정
테스트 데이터:
- 사용자: test.user@gmail.com
- 기존 예약: 2건 (승인된 예약)

테스트 단계:
1. 3번째 예약 생성 시도 (성공해야 함)
2. 4번째 예약 생성 시도 (차단되어야 함)
3. 기존 예약 취소 후 새 예약 시도
4. 완료된 예약은 한도에 포함되지 않음 확인

예상 결과:
✅ 3번째 예약: 정상 생성 허용
✅ 4번째 예약: "최대 3건까지 예약 가능합니다" 차단
✅ 기존 예약 취소 후: 새 예약 허용
✅ 완료/취소된 예약: 한도 계산에서 제외

한도 계산 대상:
- pending (대기중) ✅
- approved (승인됨) ✅  
- checked_in (체크인함) ✅
- completed (완료) ❌
- cancelled (취소) ❌
```

### 2.3 예약 상태 변경 플로우

#### **TC-F009: 관리자 승인/거절 프로세스**
```
테스트 시나리오:
1. 사용자가 예약 신청 (상태: pending)
2. 관리자가 승인 처리 (상태: approved)
3. 다른 예약을 거절 처리 (상태: rejected)

테스트 단계:
1. pending 상태 예약 생성
2. 관리자 페이지에서 승인 버튼 클릭
3. 사용자에게 승인 알림 발송 확인
4. 다른 예약에 거절 사유 입력 후 거절
5. 거절 알림 발송 확인

예상 결과:
✅ 승인 시: pending → approved 상태 변경
✅ 거절 시: pending → rejected 상태 변경
✅ 승인/거절 알림 정확한 내용으로 발송
✅ 거절 시 해당 시간대 다시 예약 가능
✅ 상태 변경 로그 기록

알림 내용 검증:
- 승인: 사용자명, 날짜, 시간, 기기명 포함
- 거절: 거절 사유와 대안 시간대 안내
```

#### **TC-F010: 사용자 예약 취소**
```
전제조건: 시스템 설정에서 "24시간 전까지 취소 가능"
테스트 데이터:
- 예약 시간: 내일 14:00-16:00
- 취소 시도 시간: 오늘 13:00 (25시간 전)
- 취소 시도 시간: 오늘 15:00 (23시간 전)

테스트 단계:
1. 25시간 전 취소 시도 (허용되어야 함)
2. 23시간 전 취소 시도 (차단되어야 함)
3. 취소 성공 시 기기 상태 복구 확인
4. 취소 불가 시 관리자 문의 안내

예상 결과:
✅ 25시간 전: 취소 성공, approved → cancelled
✅ 23시간 전: "취소 가능 시간이 지났습니다" 차단
✅ 취소 성공 시: 해당 시간대 다시 예약 가능
✅ 취소 불가 시: 관리자 연락처 안내

시간 계산:
- 예약 시작 시간 기준 24시간 전
- KST 시간대 정확한 계산
- 서버 시간 기준 최종 검증
```

---

## 🎮 3. 기기 관리 시스템

### 3.1 3단계 기기 계층 구조

#### **TC-F011: 카테고리-기종-개별기기 계층 관리**
```
테스트 데이터:
- 카테고리: SEGA, KONAMI, BANDAI NAMCO
- 기종: maimai DX PLUS (SEGA 산하)
- 개별 기기: maimai_dx_001, maimai_dx_002, maimai_dx_003

테스트 단계:
1. 관리자가 새 카테고리 "TAITO" 추가
2. TAITO 산하에 기종 "Groove Coaster" 추가
3. 기종 설정에서 보유 대수 3대 설정
4. 개별 기기 3대 자동 생성 확인
5. 예약 시스템에서 새 기기 선택 가능 확인

예상 결과:
✅ 카테고리 생성 및 순서 관리
✅ 기종 추가 시 플레이 모드별 가격 설정
✅ 보유 대수만큼 개별 기기 자동 생성
✅ 기기 번호 자동 할당 (#1, #2, #3)
✅ 예약 시 새 기기 선택 옵션 표시

계층 구조 검증:
- 카테고리 삭제 시 하위 기종 확인
- 기종 삭제 시 하위 개별 기기 처리
- 개별 기기 상태 독립적 관리
```

#### **TC-F012: 기기 상태 실시간 동기화**
```
테스트 시나리오:
1. 관리자A가 기기 상태를 'maintenance'로 변경
2. 관리자B가 동일 기기 예약 승인 시도
3. 사용자가 예약 화면에서 기기 목록 확인

테스트 단계:
1. maimai_dx_001을 maintenance 상태로 변경
2. 실시간으로 예약 가능 기기 목록에서 제외 확인
3. 관리자B 화면에서 즉시 상태 반영 확인
4. 사용자 예약 화면에서 해당 기기 비활성화

예상 결과:
✅ 상태 변경 즉시 모든 관리자 화면 동기화
✅ 예약 시스템에서 해당 기기 선택 불가
✅ WebSocket/SSE 실시간 업데이트
✅ 기존 예약에는 영향 없음 (새 예약만 차단)

동기화 검증:
- 관리자 대시보드: 기기 현황 실시간 반영
- 예약 페이지: 사용 가능 기기 목록 업데이트
- 모바일 앱: 기기 상태 동기화
```

### 3.2 대여 설정 및 가격 관리

#### **TC-F013: 플레이 모드별 가격 적용**
```
테스트 데이터:
- 기종: maimai DX PLUS
- 플레이 모드: 
  * Standard: 500원/30분
  * DX Mode: 1000원/30분
  * Challenge: 800원/30분

테스트 단계:
1. 예약 시 플레이 모드 선택 UI 확인
2. 각 모드별 시간당 가격 계산 확인
3. 2시간 예약 시 총 금액 계산
4. 모드 변경 시 가격 실시간 업데이트

예상 결과:
✅ Standard 2시간: 2,000원 (500원 × 4)
✅ DX Mode 2시간: 4,000원 (1000원 × 4)  
✅ Challenge 2시간: 3,200원 (800원 × 4)
✅ 모드 변경 시 총액 실시간 계산

가격 계산 로직:
- 30분 단위 기본 가격
- 시간 비례 계산 (1시간 = 2 × 30분 가격)
- 할인 정책 적용 (있는 경우)
- 부가세 포함 여부 확인
```

#### **TC-F014: 대여 가능 설정 동기화**
```
테스트 시나리오:
1. 관리자가 "마이마이 DX PLUS" 기종의 "대여가능" 체크 해제
2. 기존 승인된 예약은 유지
3. 새로운 예약에서 해당 기종 선택 불가

테스트 단계:
1. 기종 설정에서 "대여가능" 체크박스 해제
2. 예약 페이지에서 해당 기종 목록 확인
3. 검색 시 해당 기종 제외 확인
4. 기존 예약자에 미치는 영향 없음 확인

예상 결과:
✅ 새 예약: 해당 기종 선택 불가
✅ 기존 예약: 정상 진행 (체크인/결제 가능)
✅ 예약 목록: "대여 불가" 표시 또는 숨김
✅ 관리자 대시보드: 상태 정확히 반영

비즈니스 로직:
- 기존 예약자 권리 보호
- 새 예약 차단으로 점진적 단계적 중단
- 응급 상황 시 즉시 차단 옵션 제공
```

---

## ✅ 4. 체크인 및 결제 시스템

### 4.1 체크인 프로세스

#### **TC-F015: 정시 체크인 프로세스**
```
전제조건: 
- 예약 시간: 14:00-16:00 (승인됨)
- 체크인 시간: 13:45 (15분 전)

테스트 단계:
1. 예약 시작 1시간 전 체크인 시도 (차단)
2. 예약 시작 15분 전 체크인 (허용)
3. 기기 자동 배정 확인
4. 체크인 완료 알림 발송 확인

예상 결과:
✅ 1시간 전: "체크인 시간이 아닙니다" 메시지
✅ 15분 전: 체크인 성공, approved → checked_in
✅ 사용 가능한 기기 자동 배정
✅ WiFi 정보 포함된 체크인 완료 알림 발송

체크인 시간 규칙:
- 예약 시작 1시간 전부터 체크인 가능
- 예약 시작 후에도 체크인 가능 (늦은 도착)
- 예약 종료 시간 이후 체크인 불가
```

#### **TC-F016: 기기 자동 배정 로직**
```
테스트 조건:
- 기종: maimai DX PLUS (총 4대 보유)
- 기기 상태: #1(사용중), #2(고장), #3(사용가능), #4(사용가능)

테스트 단계:
1. 체크인 시 사용 가능한 기기 중 자동 배정
2. 배정 우선순위 확인 (번호 순서)
3. 배정된 기기 상태 'in_use'로 변경
4. 체크인 완료 시 기기 번호 안내

예상 결과:
✅ #3번 기기 우선 배정 (사용 가능한 것 중 가장 낮은 번호)
✅ 기기 상태: available → in_use
✅ 체크인 알림: "배정 기기 maimai DX PLUS #3"
✅ 다른 사용자 예약 시 #4번 기기 배정

배정 로직:
- 사용 가능(available) 기기만 대상
- 기기 번호 오름차순 우선
- 고장(maintenance) 기기 제외
- 사용중(in_use) 기기 제외
```

#### **TC-F017: 늦은 체크인 및 노쇼 처리**
```
테스트 시나리오:
- 예약 시간: 14:00-16:00
- 현재 시간: 14:30 (30분 늦음)
- 노쇼 기준: 예약 시작 후 30분

테스트 단계:
1. 예약 시작 30분 후 체크인 시도
2. 늦은 체크인 허용 확인
3. 자동 노쇼 처리 시점 확인 (30분 후)
4. 노쇼 처리 시 기기 자동 해제

예상 결과:
✅ 30분 늦은 체크인 허용 (14:30 체크인 성공)
✅ 사용 시간 조정: 14:30-16:00 (1.5시간)
✅ 요금 자동 조정 또는 관리자 수정 안내
✅ 31분 후: 자동 노쇼 처리

노쇼 처리:
- approved → no_show 상태 변경
- 배정된 기기 → available 상태 복구
- 해당 시간대 다른 사용자 예약 가능
- 노쇼 알림 발송
```

### 4.2 결제 시스템

#### **TC-F018: 계좌이체 결제 프로세스**
```
테스트 데이터:
- 예약 금액: 4,000원 (2시간, DX Mode)
- 결제 방법: 계좌이체
- 계좌번호: 국민은행 123456-78-901234

테스트 단계:
1. 체크인 완료 후 결제 방법 "계좌이체" 선택
2. 계좌번호 보기 팝업 확인
3. 계좌번호 복사 기능 테스트
4. 관리자가 입금 확인 후 결제 완료 처리

예상 결과:
✅ 계좌번호 팝업에 정확한 정보 표시
✅ 클립보드 복사 기능 정상 동작
✅ 입금자명 자동 생성 (예약자 이름)
✅ 관리자 결제 확인 후: checked_in → paid

결제 알림 내용:
- 예약자명, 예약 시간, 기기명
- 결제 금액, 계좌 정보
- 입금자명 안내
- 입금 확인 시간 안내
```

#### **TC-F019: 현금 결제 및 금액 조정**
```
테스트 시나리오:
- 원래 예약: 14:00-16:00 (2시간, 4,000원)
- 실제 사용: 14:00-15:30 (1.5시간)
- 조정 금액: 3,000원

테스트 단계:
1. 결제 방법 "현금" 선택
2. 종료 시간을 15:30으로 조정
3. 조정 사유 입력: "사용자 요청으로 30분 단축"
4. 조정된 금액 3,000원 현금 결제 처리

예상 결과:
✅ 시간 조정 시 금액 자동 재계산
✅ 조정 사유 필수 입력 검증
✅ 현금 결제 완료: checked_in → paid
✅ 조정 내역 로그 기록

시간/금액 조정 로직:
- 30분 단위 계산 (1.5시간 = 3 × 30분)
- DX Mode: 1000원/30분 × 3 = 3,000원
- 조정 사유 필수 입력
- 음수 조정 불가 (환불은 별도 처리)
```

#### **TC-F020: 연장 요금 처리**
```
테스트 조건:
- 원래 예약: 14:00-16:00 (2시간)
- 연장 요청: 16:00-17:00 (1시간 추가)
- 다음 예약: 17:00-19:00 (다른 사용자)

테스트 단계:
1. 15:50에 1시간 연장 요청
2. 다음 예약 시간 충돌 확인
3. 연장 불가 시 안내 메시지
4. 연장 가능 시 추가 요금 계산

예상 결과:
✅ 다음 예약 있음: "17시부터 다른 예약이 있어 연장 불가"
✅ 다음 예약 없음: 연장 허용, 추가 요금 2,000원
✅ 연장 결제 완료 후 종료 시간 17:00로 변경
✅ 기기 사용 시간 자동 연장

연장 요금 계산:
- 기존 플레이 모드 동일 요금 적용
- DX Mode 1시간: 2,000원 (1000원 × 2)
- 연장 결제 방법: 현금/계좌이체 선택
```

---

## 📊 5. 통계 및 분석 시스템

### 5.1 예약 통계 데이터

#### **TC-F021: 예약 통계 정확성 검증**
```
테스트 데이터 (최근 30일):
- 총 예약: 100건
- 승인된 예약: 80건
- 거절된 예약: 15건
- 취소된 예약: 5건
- 완료된 예약: 70건

테스트 단계:
1. 관리자 통계 페이지 접근
2. 30일 필터 선택
3. 각 상태별 집계 확인
4. 차트 데이터와 수치 일치 확인

예상 결과:
✅ 총 예약 통계: 80건 (승인된 것만 집계)
✅ 완료율: 87.5% (70/80)
✅ 취소율: 6.25% (5/80)
✅ 차트 데이터 일치

통계 집계 규칙:
- pending: 집계 제외 (확정되지 않음)
- rejected: 집계 제외 (실제 예약 아님)
- approved, checked_in, paid, completed: 집계 포함
```

#### **TC-F022: 시간대별 이용 분석**
```
테스트 데이터:
- 조기영업(10-14시): 20건
- 일반시간(14-22시): 45건  
- 밤샘시간(24-29시): 15건

테스트 단계:
1. 시간대별 예약 분포 차트 확인
2. 24-29시 표기법 정확성 확인
3. 시간대별 매출 분석
4. 피크 시간대 식별

예상 결과:
✅ 일반시간 56.25% (45/80)로 최고 비율
✅ 밤샘시간 18.75% (15/80)
✅ 24-29시 표기로 차트 표시
✅ 피크시간: 16-18시 구간

시간대 분류:
- 조기영업: 10:00-13:59
- 일반영업: 14:00-23:59  
- 밤샘영업: 24:00-29:59 (0:00-5:59)
```

#### **TC-F023: 기기별 인기도 분석**
```
테스트 데이터:
- maimai DX: 40건 (50%)
- VOLTEX: 25건 (31.25%)
- Groove Coaster: 15건 (18.75%)

테스트 단계:
1. 기기별 예약 건수 집계
2. 인기도 순위 정렬
3. 파이 차트로 비율 표시
4. 기기별 매출 비교

예상 결과:
✅ maimai DX 1위 (50% 점유율)
✅ 파이 차트 정확한 비율 표시
✅ 기기별 매출: maimai DX 160만원 (4,000원 × 40건)
✅ 점유율 트렌드 분석

분석 지표:
- 예약 건수 기준 인기도
- 매출 기준 수익성
- 시간대별 기기 선호도
- 월별 트렌드 변화
```

### 5.2 매출 및 수익 분석

#### **TC-F024: 일별 매출 추이**
```
테스트 기간: 최근 7일
테스트 데이터:
- 월요일: 12만원 (예약 30건)
- 화요일: 8만원 (예약 20건)
- 수요일: 15만원 (예약 35건)
- 목요일: 18만원 (예약 40건)
- 금요일: 25만원 (예약 55건)
- 토요일: 32만원 (예약 65건)
- 일요일: 28만원 (예약 60건)

테스트 단계:
1. 매출 대시보드 일별 차트 확인
2. 주말 vs 평일 매출 비교
3. 트렌드 화살표 방향 확인
4. 목표 대비 달성률 확인

예상 결과:
✅ 총 주간 매출: 138만원
✅ 주말 평균: 30만원, 평일 평균: 14.6만원
✅ 상승 트렌드: 전주 대비 +15% 
✅ 일별 차트 정확한 데이터 표시

매출 계산:
- 실제 결제 완료(paid) 예약만 집계
- 취소/노쇼/환불 제외
- 연장 요금 포함
- 할인 적용 후 실매출
```

---

## 🔄 6. 실시간 동기화 시스템

### 6.1 다중 사용자 동기화

#### **TC-F025: 예약 현황 실시간 업데이트**
```
테스트 시나리오:
1. 사용자A가 예약 페이지 접속
2. 사용자B가 동일 시간대 예약 신청
3. 관리자가 사용자B 예약 승인
4. 사용자A 화면에서 실시간 반영 확인

테스트 단계:
1. A와 B가 동시에 예약 페이지 접속
2. B가 14:00-16:00 시간대 예약 신청
3. 관리자가 B의 예약 승인
4. A의 화면에서 해당 시간대 비활성화 확인

예상 결과:
✅ B의 예약 신청 시: A 화면에 즉시 "예약 검토 중" 표시
✅ 관리자 승인 시: A 화면에서 해당 시간대 선택 불가
✅ WebSocket 연결로 1초 이내 동기화
✅ 네트워크 지연 시에도 정확한 상태 반영

동기화 메커니즘:
- WebSocket 실시간 통신
- Server-Sent Events (SSE) 폴백
- 페이지 포커스 시 상태 확인
- 중복 예약 방지 서버 검증
```

#### **TC-F026: 관리자 간 작업 동기화**
```
테스트 시나리오:
1. 관리자A와 B가 동시에 예약 관리 페이지 접속
2. 관리자A가 예약 승인 처리
3. 관리자B가 동일한 예약 승인 시도
4. 중복 처리 방지 및 상태 동기화

테스트 단계:
1. 두 관리자가 동일한 pending 예약 확인
2. A가 승인 버튼 클릭
3. B의 화면에서 즉시 "승인됨" 상태로 변경
4. B가 승인 버튼 클릭 시 "이미 처리됨" 메시지

예상 결과:
✅ A의 승인 처리 시: B 화면 즉시 동기화
✅ B의 중복 시도: "이미 승인된 예약입니다" 차단
✅ 상태 변경 로그: A의 승인만 기록
✅ 알림 발송: 중복 발송 방지

동시성 제어:
- 데이터베이스 트랜잭션 레벨 락
- Optimistic Locking 적용
- 상태 변경 전 최신 상태 재확인
- 실시간 UI 업데이트
```

### 6.2 기기 상태 동기화

#### **TC-F027: 기기 상태 변경 실시간 반영**
```
테스트 조건:
- 기기: maimai DX #1 (현재 available)
- 접속자: 관리자 2명, 일반 사용자 3명

테스트 단계:
1. 관리자A가 기기 상태를 'maintenance'로 변경
2. 관리자B 대시보드에서 즉시 반영 확인
3. 사용자들의 예약 페이지에서 해당 기기 숨김 확인
4. 상태를 다시 'available'로 복구

예상 결과:
✅ 상태 변경 즉시 모든 화면 동기화
✅ 예약 페이지: 해당 기기 선택 불가
✅ 관리자 대시보드: 기기 현황 업데이트
✅ 복구 시: 모든 화면에서 다시 선택 가능

실시간 반영 범위:
- 관리자 대시보드
- 기기 관리 페이지
- 사용자 예약 페이지
- 모바일 앱 (있는 경우)
```

---

## 🔍 7. 검색 및 필터링

### 7.1 예약 검색 기능

#### **TC-F028: 다중 조건 검색**
```
테스트 데이터:
- 날짜 범위: 2025-01-20 ~ 2025-01-25
- 기기 타입: maimai DX
- 예약 상태: approved
- 사용자: "홍길동"

테스트 단계:
1. 날짜 범위 필터 적용
2. 기기 타입 필터 추가
3. 상태 필터 추가
4. 사용자명 검색 추가
5. 모든 조건을 만족하는 결과 확인

예상 결과:
✅ 모든 조건 AND 연산으로 필터링
✅ 실시간 결과 카운트 업데이트
✅ 페이지네이션 정상 동작
✅ 필터 초기화 기능

검색 조건:
- 날짜: 범위 선택 (시작일 ~ 종료일)
- 기기: 다중 선택 가능
- 상태: 체크박스 다중 선택
- 사용자: 부분 일치 검색 (LIKE %홍길동%)
```

#### **TC-F029: 통합 검색 (Full-text Search)**
```
테스트 쿼리:
- "마이마이 2시간 홍길동"
- "내일 오후 기기 고장"
- "승인 대기 계좌이체"

테스트 단계:
1. 통합 검색박스에 쿼리 입력
2. 예약, 사용자, 기기 통합 검색 결과
3. 검색 결과 카테고리별 분류
4. 검색어 하이라이트 표시

예상 결과:
✅ 연관된 모든 데이터 검색
✅ 카테고리별 결과 분류 (예약/사용자/기기)
✅ 검색어 굵게 표시
✅ 검색 성능 3초 이내

검색 범위:
- 예약: 사용자명, 기기명, 요청사항
- 사용자: 이름, 이메일, 닉네임
- 기기: 기기명, 카테고리, 설명
- 관리 로그: 관리자 액션, 메모
```

### 7.2 스마트 필터링

#### **TC-F030: 인텔리전트 추천 필터**
```
테스트 시나리오:
1. 사용자가 "마이마이" 검색
2. 시스템이 관련 필터 자동 제안
3. 인기 시간대와 추천 옵션 제공
4. 사용자 선호도 기반 개인화

테스트 단계:
1. "마이마이" 입력 시 자동완성 확인
2. 마이마이 관련 인기 시간대 표시
3. 과거 예약 패턴 기반 추천
4. 현재 예약 가능한 슬롯 우선 표시

예상 결과:
✅ 자동완성: "maimai DX", "maimai PLUS" 제안
✅ 인기 시간대: 16-18시, 20-22시 강조
✅ 개인화 추천: 사용자 과거 선호 시간대 우선
✅ 실시간 가용성: 예약 가능한 슬롯 먼저 표시

추천 알고리즘:
- 사용자 과거 예약 패턴 분석
- 전체 사용자 인기 시간대
- 실시간 예약 가능 여부
- 계절별/요일별 트렌드 반영
```

---

## 📊 테스트 실행 가이드

### 테스트 실행 순서

**Phase 1: 기본 기능 검증**
- TC-F001 ~ TC-F003: 사용자 인증
- TC-F004 ~ TC-F010: 예약 생성 및 상태 관리

**Phase 2: 시스템 통합 테스트**
- TC-F011 ~ TC-F014: 기기 관리 시스템
- TC-F015 ~ TC-F020: 체크인 및 결제

**Phase 3: 데이터 및 분석**
- TC-F021 ~ TC-F024: 통계 및 매출 분석
- TC-F025 ~ TC-F027: 실시간 동기화

**Phase 4: 고급 기능**
- TC-F028 ~ TC-F030: 검색 및 필터링

### 테스트 환경 설정

```bash
# 기능 테스트 환경 준비
npm run test:functional:setup

# 테스트 데이터 생성
npm run test:seed-functional-data

# 기능 테스트 실행
npm run test:functional

# 실시간 동기화 테스트
npm run test:realtime
```

### 성능 기준

- **페이지 로딩**: 2초 이내
- **실시간 동기화**: 1초 이내  
- **검색 응답**: 3초 이내
- **결제 처리**: 5초 이내

### 브라우저 호환성

- **데스크톱**: Chrome 90+, Firefox 88+, Safari 14+
- **모바일**: iOS Safari 14+, Android Chrome 90+
- **PWA**: 오프라인 기능 포함

---

## 📞 문의 및 피드백

기능 테스트 관련 문의사항:

- **QA 팀**: #qa-functional-tests
- **기능 개선**: GitHub Issues with label "functional-enhancement"
- **버그 리포트**: #qa-bug-reports

**⚠️ 중요**: 결제 관련 테스트는 반드시 테스트 환경에서만 실행하고, 실제 결제가 발생하지 않도록 주의해주세요.

---

*마지막 업데이트: 2025-07-25*
*작성자: QA Team*
*리뷰어: Development Team, Product Team*