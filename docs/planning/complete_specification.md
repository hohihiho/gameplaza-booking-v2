# 광주 게임플라자 예약 시스템 완전 기획서 (최종)

> 📌 **문서 안내**: 이 문서는 프로젝트 전체를 포괄하는 통합 기획서입니다. 
> 상세한 기능별 문서는 [기획 문서 가이드](./README.md)를 참조하세요.

## 📚 관련 문서 빠른 링크

| 카테고리 | 문서 | 설명 |
|---------|------|------|
| **시간 시스템** | [시간대 시스템 상세](./time_slot_system.md) | KST 처리, 24시간 표시 체계 |
| **예약 시스템** | [기기 예약 시스템](./device_number_reservation.md) | 1인 1대 원칙, 기기 선택 로직 |
| **운영 관리** | [시간 조정 기능](./time_adjustment_implementation_plan.md) | 예약 시간/금액 조정 |
| **사용자 가이드** | [사용자 플로우](./user_flow.md) | 일반 사용자 여정 |
| **관리자 가이드** | [관리자 플로우](./admin_flow.md) | 관리자 워크플로우 |
| **디자인** | [디자인 가이드](./design_guide.md) | UI/UX 가이드라인 |

## 📋 프로젝트 개요

### 목적
- 카카오톡 오픈채팅 기반 예약을 **웹 기반 PWA**로 전환
- **모바일 퍼스트** 설계로 99% 모바일 사용자 최적화
- **실시간 알림**과 **통합 관리**로 운영 효율성 극대화
- **1인 1대 대여** 원칙으로 간소화된 예약 시스템

### 핵심 특징
- 🔐 **구글 OAuth 단일 인증** (전화번호 인증 제거)
- 📱 **PWA 웹앱** (홈화면 추가, 실시간 알림)
- 🔧 **직관적인 관리자 시스템** (예약/기기/회원 통합 관리)
- ⚡ **실시간 동기화 비활성화** (사용자 불편으로 비활성화, 수동 새로고침으로 대체)
- 🎮 **리듬게임 전문 오락실** (제조사별 관리, 기종별 2P 등)
- 🕐 **KST 타임존 고정**: 모든 시간 처리는 한국 표준시(KST) 기준
  - 서버/클라이언트 모두 KST로 통일
  - created_at 등 타임스탬프도 KST로 표시
- ⏰ **영업일 기준 06시 리셋**: 모든 날짜 전환은 익일 06시 기준
  - 대시보드 통계: 06시 이전 시간은 전날 영업일로 간주
  - 예약 정렬: 00:00~05:59는 전날 영업일의 24~29시로 처리
  - 매출 집계: 영업일 기준으로 매출 계산 (자정이 아닌 06시 기준)
- 🔒 **AI 기반 보안**: 닉네임 중복 체크, 비속어 필터링 및 스팸 차단
- 💬 **카카오톡 1:1 채팅 문의**: https://open.kakao.com/o/sJPbo3Sb

### 커뮤니티 채널
- **X (구 트위터)**: 최신 소식과 이벤트 정보 공유
- **YouTube**: 매장 내 방송기기를 통한 실시간 게임 방송 송출
- **카카오톡 오픈챗**: 커뮤니티 친목 및 정보 교류 (https://open.kakao.com/o/gItV8omc)
- **Discord**: 게이머 친목 교류 공간

---

## 🏗️ 기술 스택

### Frontend
#### 프레임워크 및 라이브러리
- **Next.js 14**: App Router 사용, Server Components 활용
- **React 18**: 최신 기능 활용 (Suspense, Concurrent Features)
- **TypeScript**: 타입 안정성 보장
- **PWA**: Service Worker, 오프라인 지원, 푸시 알림

#### 스타일링
- **Tailwind CSS**: 유틸리티 우선 CSS 프레임워크
- **Framer Motion**: 애니메이션 라이브러리
- **CSS Modules**: 컴포넌트별 스타일 격리 (필요시)

#### 상태 관리
- **NextAuth.js**: 인증 상태 관리
- **Zustand**: 전역 상태 관리 (예약 정보 등)
- **React Query (TanStack Query)**: 서버 상태 관리

#### 유틸리티
- **date-fns**: 날짜 처리 (KST 기준)
- **Lucide React**: 아이콘 라이브러리
- **React Hook Form**: 폼 상태 관리
- **Supabase Client**: 실시간 DB 연동

### Backend & Database
- **Supabase** (PostgreSQL + Realtime + Storage)
- **구글 OAuth** (인증)
- **AI 필터링 시스템** (닉네임 중복 체크, 비속어/스팸 차단)

### 배포 & 호스팅
- **Vercel** (Frontend 호스팅)
- **GitHub Actions** (크론잡 - 무료)
  - 10분마다 기기 상태 자동 업데이트
  - 매일 Supabase 활성화 유지
- **커스텀 도메인** 연결

---

## 👥 사용자 인증 & 권한

### 인증 프로세스
1. **구글 OAuth 로그인** (ONLY 구글)
2. **신규 사용자 회원가입**
   - 닉네임 입력 (필수, 2-8자)
   - 닉네임 중복 체크 및 비속어 필터링
   - 약관 동의 (필수/선택)
3. **인증 완료** → 모든 기능 이용 가능

### 사용자 권한
| 권한 | 접근 가능 기능 |
|------|----------------|
| **일반 사용자** | 예약 신청, 마이페이지, 정보 조회 |
| **스태프** | 예약 조회, 기기현황 확인 (읽기 전용) |
| **관리자** | 모든 기능 + 체크인 + 계좌정보 관리 |
| **슈퍼관리자** | 관리자 권한 + 관리자 추가/삭제 권한 |

### 슈퍼관리자 계정
기본 등록된 슈퍼관리자 (변경 불가):
- ndz5496@gmail.com
- leejinseok94@gmail.com

---

## 🎯 핵심 기능 요약

### 1. 📝 예약 신청 시스템
> 📄 **상세 문서**: [기기 예약 시스템](./device_number_reservation.md), [시간대 시스템](./time_slot_system.md)

- 24시간 룰 적용된 예약 신청
- 실시간 예약 가능 여부 체크
- 1인 1대 원칙 (기기 번호 선택)
- 마이마이 2P 옵션 (+10,000원)
- 관리자 수동 승인/거절
- **예약 제한 규칙**
  - 예약은 최대 3주(21일) 후까지만 가능
  - 동시에 최대 3개까지 예약 가능 (관리자는 제한 없음)
  - 예약은 시작 시간 24시간 전까지만 가능
  - **시간대별 최대 대여 가능 대수 제한**: 
    - 기기 타입별로 조기/밤샘 시간대에 동시 대여 가능한 최대 대수 설정
    - 조기 시간대 (07:00-14:00): 해당 시간대 내 어느 시간에라도 예약이 있으면 전체 조기 시간대 예약 불가
    - 밤샘 시간대 (22:00-05:00): 해당 시간대 내 어느 시간에라도 예약이 있으면 전체 밤샘 시간대 예약 불가
    - 비트매니아 IIDX처럼 1대만 있는 기기는 max_rental_units = 1로 설정하여 완전 제한
    - 예: "조기 시간대에 이미 예약이 있습니다. 최대 대여 가능 대수(1대)를 초과했습니다"
- **시간 표시 체계**: 익일 새벽 0~5시는 24~29시로 표시
  - 예: 밤샘 시간대 22:00~05:00 → 22시~29시
  - 연속적인 시간대 인식을 위한 표시 방법
- **시간대별 예약 가능 대수 표시**:
  - 시간대 선택 화면에서 각 시간대별 남은 예약 가능 대수 실시간 표시
  - 예: "08:00-09:00 (3대 예약 가능)" → 해당 시간대에 예약 가능한 기기 수
  - 조기/밤샘 시간대는 전체 시간대 기준으로 남은 대수 계산
  - 예약이 완료되면 실시간으로 남은 대수 감소 표시
- **예약 번호 시스템**: 간단하고 기억하기 쉬운 형식
  - 형식: YYMMDD-NNN (예: 250701-001)
  - 날짜 기반 순차 번호로 관리 편의성 향상
- **예약 내역 관리**
  - 페이지네이션 적용 (10개씩 표시)
  - 상단 고정 필터링 및 페이지 이동
  - 상태별 필터: 전체, 대기중, 승인됨, 완료, 취소
  - 예약 정보 표시: 기기명, 모델명(있는 경우), 날짜, 시간, 금액, 크레딧 타입
  - 클라이언트 사이드 필터링으로 전체 개수 유지
- **예약 시간 표시**
  - 기본: "7월 1일 (화) 24시-28시 (4시간)"
  - 시작-종료 시간과 총 이용시간을 함께 표시
  - 밤샘 시간대는 정액 요금 적용
- **가격 정책**
  - 일반 시간대: 시간당 요금 × 이용시간
  - 밤샘 시간대: 정액 요금 (시간 무관)
  - 예: 마이마이 밤샘 2인 = 25,000원(기본) + 10,000원(2P) = 35,000원
- **예약 가능 기기 실시간 확인**
  - pending(대기), approved(승인), checked_in(체크인) 상태의 예약이 있는 기기는 선택 불가
  - **예약 상태별 기기 표시**:
    - 예약대기(pending): 회색 배경에 주황색 텍스트 "예약대기"
    - 예약확정(approved): 회색 배경에 파란색 텍스트 "예약확정"
    - 사용중(checked_in): 회색 배경에 초록색 텍스트 "사용중"
  - **기기 번호 선택 UI**:
    - 모든 기기는 번호순으로 정렬(1번, 2번, 3번...)
    - 예약된 기기는 선택 불가능하고 회색 배경 처리
    - 작은 버튼 크기(p-3)로 컴팩트한 디자인
    - 상태별 텍스트 색상으로 직관적 구분
  - 사용자가 기기 선택 시 어떤 기기가 예약되었는지 명확히 확인 가능
  - 시간대별로 예약된 기기 제외하여 표시
  - maintenance(점검중), broken(사용불가) 상태 기기 제외
  - 모델명이 있는 기기는 "기종명 모델명 : #번기" 형식으로 표시
- **예약 신청 UX 개선**
  - 선택 즉시 다음 단계로 자동 진행
  - 상단에 이전 버튼 배치
  - 스텝 인디케이터 클릭으로 단계 이동
- **크레딧 타입 시스템**
  - 고정크레딧 (fixed): 정해진 크레딧 개수
  - 프리플레이 (freeplay): 시간내 자유 플레이
  - 무한크레딧 (unlimited): 무제한 플레이

### 2. ✅ 체크인 & 결제 시스템
> 📄 **상세 문서**: [관리자 플로우](./admin_flow.md), [시간 조정 기능](./time_adjustment_implementation_plan.md)

- 기기 번호 자동 배정
- **체크인 승인 시간**: 예약 시작 1시간 전부터 가능
  - 관리자 대시보드에 체크인 대기 건수 표시
  - 1시간 전부터 체크인 버튼 활성화
- **간소화된 계좌이체 시스템**: 계좌번호 보기 링크 제공
  - 체크인 시 계좌이체 선택하면 '계좌번호 보기' 링크 표시
  - 입금 확인 시에도 '계좌번호 확인하기' 링크 제공
  - 고객이 필요할 때만 계좌정보 확인 (자주 이용하는 고객은 이미 저장)
- **결제 확인 프로세스**
  - 현금/계좌이체 모두 수동 확인 필요
  - 결제 확인 버튼으로 "결제완료" 처리
  - 결제 완료 후에도 결제 수단 변경 가능
- **시간 및 금액 조정 시스템**
  - 종료 시간만 조정 가능 (시작 시간 조정 제거)
  - 금액 수동 조정 기능 (자동 계산 없음)
  - 조정 사유 입력으로 이력 관리
- **예약 상태 관리**
  - 승인됨 (노란색): 체크인 대기 상태
  - 체크인 (초록색): 체크인 완료, 결제 대기
  - 사용중 (파란색): 결제 완료, 이용 중
  - 체크인 취소 기능: 모든 상태 원복
- **노쇼 처리**: 관리자가 수동으로 처리 (예약 시작 30분 후부터 가능), 사유 입력 선택사항
- **자동 기기 상태 변경**: 예약 종료 시간에 자동으로 기기 상태 변경

### 3. 🎮 기기 관리 시스템 (2개 시스템 분리)
> 📄 **상세 문서**: [기기 예약 시스템](./device_number_reservation.md), [운영 인사이트](./operation_insights.md)

- **기기 관리**: 전체 오락실 기기 관리
  - 3단계 계층 구조 관리
    * 카테고리: SEGA, KONAMI, BANDAI NAMCO 등 제조사별 분류
    * 기종: 마이마이 DX, 사운드 볼텍스 등 게임기 종류
    * 개별 기기: 각 기종의 실제 기기 번호 (#1, #2, #3...)
  - 기종 정보 입력 필드
    * 기종명 (필수): 예) 마이마이 DX
    * 플레이 모드별 가격: 동적 추가/삭제 가능
    * 대여 가능 여부: 체크박스
    * 총 보유대수: 기종 추가 시 입력한 대수만큼 개별 기기 자동 생성
  - 개별 기기 정보 입력 필드 (기기별로 설정)
    * 모델명: 예) VALKYRIE model, LIGHTNING model (기체 모델명, 선택사항)
    * 버전명: 예) EXCEED GEAR, BISTROVER (게임 버전명, 선택사항)
  - 기기 정보 등록 및 수정
  - 대여가능여부 on/off 체크만 가능
  - 기기 타입별 그룹화 (제조사 태그 표시)
  - 일반 플레이 요금 정보
  - 개별 기기 상태 관리 시스템
    * 보유대수 입력 시 N개의 개별 기기 자동 생성 (#1, #2, #3...)
    * 각 기기별 상태 변경 가능
      - available (사용가능): 예약 가능한 상태
      - in_use (대여중): 현재 대여 중인 상태
      - maintenance (점검중): 점검/수리 중으로 예약 불가
      - broken (고장): 고장으로 사용 불가
    * 모델명과 버전명은 기종 레벨에서 관리 (개별 기기가 아닌 기종 레벨)
    * 체크인 시 자동으로 in_use 상태로 변경
    * 예약 종료 시간에 자동으로 available로 복구 (GitHub Actions 크론잡으로 10분마다 실행)
    * **관리자 페이지에서 상태 변경 시 저장 버튼 없이 즉시 반영**
- **기기 현황 페이지**
  - 카테고리별 탭 구성
  - 기기별 모드/가격 표시
  - 실시간 대여가능 상태 표시
  - 관리자 설정 순서대로 표시
- **대여기기 관리**: 대여가능 체크된 기기들의 세부 설정
  - 시간대별 가격 (기종별로 다른 시간대 설정)
  - 크레딧 옵션별 가격
  - 대여 가능 대수 제한 (n대 중 m대만)
  - 플레이 모드 관리
    * 각 기종별로 다른 플레이 모드 설정 가능
    * 모드명과 가격을 동적으로 추가/삭제
    * 예: 스탠다드 500원, DX 모드 1000원
  - 대여 가능 대수 설정
    * 전체 보유 대수와 별개로 대여 가능 대수 제한
    * 예: 마이마이 4대 보유 중 3대만 대여 가능
    * **시간대별 최대 대여 제한**: rental_time_slots의 max_rental_units 설정
      - 조기 시간대 (07:00-14:00)와 밤샘 시간대 (22:00-05:00) 각각 제한
      - 1대만 있는 기기(비트매니아 IIDX 등)는 max_rental_units = 1로 설정
      - 예약 시 같은 시간대 타입에 예약이 있으면 전체 시간대 예약 불가
  - 순서 변경 기능
  - 대여 종류별 가격 설정
  - **관리자 페이지에서 설정 변경 시 저장 버튼 없이 즉시 반영**

### 4. 📝 콘텐츠 관리 시스템
- 홈페이지, 오락실 이용안내, 예약 이용안내, 대여안내 페이지 편집
- 실시간 편집 및 즉시 반영
- 모바일 미리보기
- 영업시간, 요금표, FAQ 등 동적 콘텐츠 관리
- **안내사항 관리**
  - 예약 안내사항: 예약 페이지 하단 표시
  - 기기 현황 안내사항: 기기 목록 하단 표시
  - 순서 변경 기능
  - 활성/비활성 토글

### 5. 📅 운영 일정 관리
- 특별 운영 시간 설정 (공휴일, 이벤트 등)
- 조기 영업, 밤샘 영업, 조기 마감 관리
- 예약 제한 설정 (특정 날짜/기간)
- 캘린더 뷰로 직관적 관리
- **운영 일정 등록 개선**
  - 시간 선택을 30분 단위로 설정
  - 제목 필드 제거, 설명만 사용 (선택사항)
  - 일정 유형별 자동 분류 (특별 운영, 조기 영업, 밤샘 영업 등)
  - "조기 오픈"을 "조기 영업"으로 용어 통일
- **자동 스케줄 생성 개선**
  - rental_time_slot_id가 없어도 시간 기반으로 조기/밤샘 판단
  - 조기영업: 6-12시 시작 예약 승인 시 자동 생성
  - 밤샘영업: 22시 이후 또는 0-6시 시작 예약 승인 시 자동 생성
- **자동 스케줄 삭제 기능**
  - 해당 날짜의 모든 예약이 취소/거절/삭제되면 자동 생성된 영업 스케줄도 자동 삭제
  - 조기영업 스케줄: 해당 영업일의 06:00-23:59 시간대 예약이 모두 없어지면 삭제
  - 밤샘영업 스케줄: 해당 영업일의 00:00-05:59 시간대 예약이 모두 없어지면 삭제
  - 수동으로 생성된 스케줄은 자동 삭제 대상에서 제외
  - 삭제 조건: `auto_generated = true`이고 해당 영업일/시간대에 활성 예약(`pending`, `approved`, `checked_in`) 없음
  - **영업일 기준 적용**: 모든 날짜 계산은 06시 리셋 기준으로 처리
- **조기개장 자동 스케줄 조정 기능**
  - 조기개장 예약이 취소되어 단일 예약만 남았을 때 자동으로 스케줄 조정
  - 예시: 7시, 8시, 9시 예약 중 7시 취소 → 8시로 조기영업 시간 자동 변경
  - 조기개장만 적용 (밤샘영업은 제외)
  - 자동 생성된 조기영업 스케줄에만 적용 (수동 생성 스케줄 제외)
  - 예약 개수가 1개만 남았을 때 해당 예약의 시작 시간으로 조기영업 시간 조정
  - 예약이 완전히 없어지면 조기영업 스케줄 자동 삭제
- **스케줄 표시 개선**
  - 시간 표시를 hh:mm:ss에서 hh:mm 형식으로 간소화
  - 자동 생성된 스케줄에서 "(자동)" 텍스트 제거
  - 조기영업은 시작 시간만 표시
  - 모바일에서 기본 영업시간은 접혀있는 상태로 표시

### 6. 📊 관리자 통계 & 데이터 관리
- 실시간 현황 대시보드
- 기간별/기기별/고객별 분석
- 엑셀/CSV/구글시트 연동
- 정산 시스템 호환
- **회원 관리**
  - 회원 목록 이름순(가나다/ABC) 정렬
  - 한글 이름은 가나다순, 영문 이름은 알파벳순 자동 정렬
  - 검색 및 필터링 후에도 정렬 순서 유지
  - 페이지네이션 지원 (20명씩 표시)
- **예약 관리 개선**
  - 페이지네이션 적용 (10개씩 표시)
  - 상단 고정 헤더로 필터/검색 항상 접근 가능
  - 거절 → 취소로 용어 변경
  - 취소 사유 선택 옵션 제공
  - 상태별 필터링 시 전체 개수 유지
  - **모바일 최적화 리디자인**: 카드형 레이아웃으로 가독성 향상
  - **예약 정렬 순서**: 대기중 → 승인 → 체크인 → 완료/취소 순
    - 대기중/승인: 대여일이 가까운 순
    - 완료/취소: 최신순
  - **예약 관리 시간/금액 조정 기능 제거**: 체크인 관리에서만 가능하도록 통일
  - **예약 가격 표시 정확성**: rental_time_slots 기반의 정확한 가격 계산
    - 기존 잘못된 가격 데이터(예: 10만원 등) 자동 수정
    - total_amount 필드의 문자열/숫자 타입 변환 처리
    - API 응답에서 parseFloat 변환으로 안정적인 가격 표시
- **통계 페이지 개선**
  - 대기/거절/취소 상태 제외한 실제 예약 통계만 표시
  - 24시간 표시를 익일 새벽은 24~28시로 표시
  - 중복 시간대 제거 및 정확한 시간대별 통계
  - 시간대별 예약 분포에서 정확한 시간 슬롯 매칭으로 중복 제거
  - 탭 형식의 상태 필터 (전체, 승인 대기, 승인됨, 취소됨, 완료됨)

### 7. 👥 고객 검색 & 관리
- 이름/이메일/닉네임 검색
- 24시간 이내 수동 예약/취소 (관리자 권한)
- 이메일 기반 블랙리스트 관리
- **관리자 관리 (슈퍼관리자 전용)**
  - 관리자/스태프 추가 및 권한 설정
  - 권한 변경 (일반/스태프/관리자)
  - 관리자 목록 조회 및 삭제
  - 슈퍼관리자는 삭제 불가

### 8. 📱 알림 시스템
- **PWA 푸시 알림** (주요 알림 수단)
  - 예약 승인/거절 즉시 알림
  - 계좌이체 요청 실시간 알림
  - 대여 1시간 전 리마인더
  - 관리자 신규 예약 알림
- **이메일 알림** (중요 공지사항만)
  - 운영시간 변경
  - 긴급 공지사항
  - 시스템 점검 안내

---

## 🎨 UI/UX 디자인 시스템

### 색상 팔레트
```css
/* Primary Colors */
--primary: #6366f1 (indigo-500)
--primary-dark: #4f46e5 (indigo-600)

/* Secondary Colors */
--secondary: #ec4899 (pink-500)
--accent: #f59e0b (amber-500)

/* Status Colors */
--success: #10b981 (emerald-500)
--warning: #f59e0b (amber-500)
--error: #ef4444 (red-500)
--info: #3b82f6 (blue-500)

/* 다크모드 자동 지원 */
```

### 반응형 브레이크포인트
- xs: 475px 이상
- sm: 640px 이상  
- md: 768px 이상
- lg: 1024px 이상
- xl: 1280px 이상

### 컴포넌트 시스템
#### 레이아웃 컴포넌트
- **LayoutWrapper**: 전체 레이아웃 관리
- **BottomTabBar**: 모바일 하단 내비게이션
- **DesktopSidebar**: 데스크톱 사이드바

#### UI 컴포넌트
- **Toast**: 알림 메시지
- **BottomSheet**: 하단 모달
- **LoadingButton**: 로딩 상태 버튼
- **FormInput**: 통합 폼 입력

#### 모바일 전용 컴포넌트
- **PullToRefresh**: 당겨서 새로고침
- **SwipeableCard**: 스와이프 카드
- **TouchRipple**: 터치 피드백
- **SkeletonLoader**: 스켈레톤 UI

## 🌐 PWA 기능 상세

### Service Worker 전략
- **정적 리소스**: Cache First (1년 캐싱)
- **API 응답**: Network First (5분 캐싱)
- **이미지**: Cache First (30일 캐싱)
- **오프라인 페이지**: 전용 폴백 페이지

### 오프라인 지원 범위
#### 완전 오프라인 지원
- 홈페이지 기본 정보
- 기기 목록 (캐시된 데이터)
- 영업 일정 (캐시된 데이터)
- 이용 안내 페이지

#### 부분 오프라인 지원
- 예약 목록 조회 (캐시된 데이터)
- 오프라인 예약 저장 (온라인 시 동기화)

#### 온라인 필수 기능
- 실시간 기기 상태
- 예약 생성/수정/취소
- 로그인/회원가입
- 결제 관련 기능

### 푸시 알림 시나리오
#### 예약 알림
- 예약 1일 전 리마인더
- 예약 승인/거절 즉시 알림
- 체크인 가능 시간 알림 (1시간 전)

#### 마케팅 알림 (동의 필수)
- 주말 특가 이벤트
- 신규 기기 도입
- 특별 영업시간 안내

#### 알림 설정
- 예약 알림 ON/OFF
- 기기 상태 알림 ON/OFF
- 마케팅 알림 ON/OFF
- 야간 알림 차단 (22:00-08:00)

## ♿ 접근성 (WCAG 2.1 AA)

### 핵심 구현 사항
1. **시맨틱 HTML**: 모든 요소에 적절한 의미 부여
2. **키보드 네비게이션**: 모든 기능 키보드로 접근 가능
3. **스크린 리더 지원**: ARIA 속성 적절히 활용
4. **색상 대비**: 텍스트 4.5:1, 큰 텍스트 3:1 이상
5. **터치 타겟**: 최소 44x44px 크기 보장
6. **포커스 관리**: 명확한 포커스 표시 및 이동
7. **오류 처리**: 명확한 오류 메시지 및 수정 가이드

### 게임플라자 특화 접근성
- 예약 단계별 진행 상태 음성 안내
- 실시간 업데이트 스크린 리더 알림
- 시간 선택 캘린더 키보드 완벽 지원
- 24시간 표시 체계 명확한 설명

## 🔄 실시간 업데이트 전략

### Supabase Realtime 활용
#### 실시간 구독 대상
- 기기 상태 변경
- 예약 상태 업데이트
- 영업시간 변경
- 신규 예약 알림 (관리자)

#### 업데이트 UI 패턴
- **토스트 알림**: 중요 변경사항
- **인라인 업데이트**: 목록 항목 자동 갱신
- **실시간 배지**: 새로운 항목 수 표시
- **연결 상태 표시**: 실시간 연결 상태

#### 충돌 해결
- 낙관적 업데이트 with 롤백
- 동시 편집 감지 및 해결
- 버전 충돌 시 사용자 선택

### 성능 최적화
- 디바운싱/스로틀링 적용
- 보이는 영역만 선택적 구독
- 배치 업데이트 처리
- 가상화로 긴 목록 최적화

## 🚀 개발 일정 (6-7주)

### 1단계: 기본 인프라 (1주)
- Supabase 프로젝트 설정 및 DB 스키마 구축
- 구글 OAuth 인증 연동
- 기본 페이지 구조 및 라우팅 설정
- Tailwind 반응형 디자인 기본 구조

### 2단계: 핵심 예약 기능 (2주)
- 24시간 룰 적용된 예약 신청 플로우
- 실시간 예약 가능 여부 체크 시스템
- 관리자 승인/거절 시스템
- FCM 알림 기본 기능 (승인/거절)

### 3단계: 관리자 시스템 (2주)
- 분리된 기기 관리 + 대여 관리 시스템
- 체크인 & 계좌이체 알림 시스템
- 기기 및 대여 순서 관리
- 예약 제한 설정 (단일/기간)

### 4단계: 고급 기능 (1-2주)
- 마이페이지 & 개인 통계
- 관리자 통계 & 데이터 내보내기
- 콘텐츠 관리 시스템
- 고객 검색 & 블랙리스트 관리

### 5단계: 최적화 & 배포 (1주)
- PWA 기능 완성 (홈화면 추가, 오프라인 지원)
- 성능 최적화 및 에러 처리 강화
- 사용자 테스트 및 버그 수정
- Vercel 배포 및 도메인 연결

---

## 💰 예상 비용

### 개발 비용
| 항목 | 비용 | 기간 |
|------|------|------|
| **Claude Max 플랜** | $100/월 | 2개월 = $200 |
| **도메인 등록** | $15/년 | - |
| **기타 (Supabase, Vercel)** | 프리 티어 무료 | - |
| **총 개발 비용** | **~$215** | - |

### 월간 운영 비용
| 항목 | 비용 | 비고 |
|------|------|------|
| **Claude Pro** | $20/월 | 유지보수용 |
| **Supabase** | $0-25/월 | 프리 → 필요시 Pro |
| **도메인** | $1.25/월 | 연간 요금 분할 |
| **Vercel** | $0/월 | 프리 티어 |
| **총 운영비** | **$21-46/월** | - |

---

## 🎯 기대 효과

### 고객 측면
- 🕐 **24/7 예약**: 언제든 편리한 예약 신청
- 👀 **투명한 현황**: 실시간 기기 상태 확인
- 💳 **간편 결제**: 계좌이체 원터치 복사
- 📊 **개인 통계**: 이용 패턴으로 만족도 향상
- 📱 **모바일 최적화**: 앱처럼 편리한 사용성

### 운영 측면
- ⚡ **효율성 증대**: 체계적인 예약 관리로 업무 간소화
- 📈 **매출 분석**: 상세 통계로 경영 인사이트 확보
- 👥 **고객 관리**: 블랙리스트, 단골 고객 체계적 관리
- 🔧 **유연한 운영**: 실시간 영업시간/제한 변경
- 📝 **콘텐츠 자율성**: 비개발자도 쉬운 페이지 관리

### 차별화 포인트
- 🎮 **리듬게임 전문**: 제조사별 분류 (SEGA, KONAMI, Bandai Namco 등)
- 🔔 **실시간 소통**: 즉시 알림으로 소통 혁신
- 🏦 **혁신적 결제**: 계좌이체 알림 + 백업 시스템 (업계 최초급)
- 📱 **모바일 네이티브**: 99% 모바일 환경 완볍 최적화
- 🔧 **운영 자율성**: 노코드로 실시간 관리 + 현장 유연성
- 💡 **현실적 설계**: 대여 가능/불가 기종 분리 + 일반 플레이 요금 표시
- 🔢 **개별 기기 관리**: 기종별 보유대수 관리 및 개별 상태 추적 시스템
- 🔒 **AI 기반 보안**: 한국어/영어 특화 비속어 필터 및 스팸 차단

---

## 🎉 프로젝트 시작 준비 완료!

**✅ 기획 완료** - 완전한 기능 명세서
**✅ 플로우 완료** - 사용자 + 관리자 플로우차트
**✅ DB 설계 완료** - 상세 스키마 정의
**✅ 개발 일정 완료** - 단계별 로드맵

**🚀 다음 단계**: Claude Max 플랜 구독 → 개발 시작

---

## 📑 관련 문서 네비게이션

### 상세 기능 문서
- **[시간대 시스템](./time_slot_system.md)** - KST 처리, 24시간 표시 체계
- **[기기 예약 시스템](./device_number_reservation.md)** - 1인 1대 원칙, 기기 선택
- **[시간 조정 기능](./time_adjustment_implementation_plan.md)** - 예약 조정 상세
- **[운영 인사이트](./operation_insights.md)** - 실제 운영 경험 기반 가이드

### 흐름도 및 가이드
- **[사용자 플로우](./user_flow.md)** - 일반 사용자 여정
- **[관리자 플로우](./admin_flow.md)** - 관리자 워크플로우
- **[사용 가이드](./usage_guide_content.md)** - 사용자 가이드 콘텐츠

### 디자인 및 개발
- **[디자인 가이드](./design_guide.md)** - UI/UX 가이드라인
- **[와이어프레임](./wireframes_collection.md)** - 화면 설계
- **[MVP 개발 계획](./mvp_development_plan.md)** - 개발 일정

### 📚 전체 문서 구조
- **[기획 문서 가이드](./README.md)** - 모든 기획 문서 목록 및 구조

---

**문서 버전**: 5.7 (2025.08.05 업데이트)
**변경 내역**:
- v5.7: 체크인 및 시간 관리 개선
  - **체크인 시스템 개선**: 체크인 후 예약 시간까지 '예약됨' 상태 유지
  - **실시간 상태 개선**: 기기현황에서 '대기 중' 상태로 표시
  - **종료시간 변경 반영**: 종료시간 변경 시 즉시 영업일정 업데이트
  - **크론잡 추가**: 5분마다 예약 시작 시간 체크 및 기기 상태 자동 업데이트
- v5.6: 조기 시간대 시간 범위 수정
  - 조기 시간대를 07:00-22:00에서 07:00-14:00으로 변경
  - 실제 운영 시간에 맞게 조기 시간대 범위 조정
- v5.5: 관리자 대리 예약 기능 추가
  - **관리자 24시간 제한 해제**: 관리자는 본인/대리 예약 모두 24시간 제한 없음
  - **대리 예약 기능**: 관리자가 다른 사용자를 대신하여 예약 생성 가능
  - **사용자 검색 기능**: 이메일/이름으로 사용자 검색하여 대리 예약
  - **UI 업데이트**: 기기 선택 버튼 크기 축소(p-3), 회색 배경에 상태별 색상 텍스트
- v5.4: 시간대별 예약 가능 대수 표시 기능 추가
  - 시간대 선택 화면에서 남은 예약 가능 대수 실시간 표시
  - 조기 시간대 시작 시간을 10:00에서 07:00으로 수정
- v5.3: 기기 선택 UI 개선
  - **예약 상태별 색상 표시 체계**: 예약대기(주황색), 예약확정(파란색), 사용중(초록색) 그라데이션 오버레이
  - **기기 번호 순서 정렬**: 모든 기기 목록에서 번호순으로 정렬하여 표시
  - **범례 추가**: 기기 선택 화면에 색상별 상태 설명 범례 표시
  - **시각적 디자인 개선**: 그라데이션 오버레이와 반투명 처리로 가독성 향상
- v5.2: 시간대별 최대 대여 가능 대수 제한 시스템 추가
  - 조기/밤샘 시간대별 max_rental_units 기반 예약 제한 구현
  - 비트매니아 IIDX 등 1대 기기의 완전 예약 제한 시스템
  - 관리자 예약 관리 페이지 가격 표시 정확성 개선
  - 관리자는 동시 예약 개수 제한 없음으로 수정
  - **예약 대기중 기기 선택 제한**: pending 상태 예약된 기기는 비활성화 표시
  - 기기 선택 UI에서 예약 가능/대기중 상태 명확히 구분 표시
- v5.1: 예약 제한 규칙 업데이트
  - 예약 가능 기간을 2주에서 3주(21일)로 확대
  - 예약 제한 규칙 섹션 추가
- v5.0: 프론트엔드 상세 명세 통합
  - 기술 스택 상세화 (Next.js 14, React 18 등)
  - UI/UX 디자인 시스템 추가
  - PWA 기능 상세 명세 추가
  - 접근성(WCAG 2.1 AA) 구현 가이드 추가
  - 실시간 업데이트 전략 추가
- v4.0: 운영 기능 개선 및 모바일 최적화
- 예약 목록 필터링 개선 (전체 개수 유지)
- 관리자 예약 관리 페이지 상단 고정 기능
- 운영 일정 관리 섹션 추가 및 개선
- 시간 선택 30분 단위, 제목 제거, "조기 영업" 용어 통일
- 모델명/버전명 관리를 기종 레벨로 이동 (개별 기기 레벨에서 제거)
- 카카오톡 1:1 채팅 링크 추가: https://open.kakao.com/o/sJPbo3Sb
- 커뮤니티 채널 정보 추가 (X, YouTube, 카카오톡 오픈챗, Discord)
- 체크인 및 결제 프로세스 전면 개편 (수동 결제 확인, 시간/금액 조정)
- 예약 상태 색상 코딩 및 체크인 취소 기능 추가
- 토스트 알림 시스템 구현
- 예약 관리 모바일 최적화 리디자인 (카드형 레이아웃)
- 예약 정렬 순서 구현 (상태별 우선순위 및 날짜순)
- 통계 페이지 중복 시간대 제거 및 정확한 통계 계산
- 자동 스케줄 생성 기능 개선 (rental_time_slot_id 없이도 작동)
- 스케줄 표시 형식 개선 (시간 간소화, 자동 텍스트 제거)
- 영업일 기준 06시 리셋 시스템 구현 (대시보드, 예약 정렬, 매출 집계)
**최종 수정**: 2025년 7월 23일
**기획자**: 광주 게임플라자 & Claude
**개발 예정 기간**: 6-7주
**예상 총 비용**: ~$215 (개발) + $21-46/월 (운영)