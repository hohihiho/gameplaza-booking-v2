# 광주 게임플라자 예약 시스템 완전 기획서 (최종)

## 📋 프로젝트 개요

### 목적
- 카카오톡 오픈채팅 기반 예약을 **웹 기반 PWA**로 전환
- **모바일 퍼스트** 설계로 99% 모바일 사용자 최적화
- **실시간 알림**과 **통합 관리**로 운영 효율성 극대화
- **1인 1대 대여** 원칙으로 간소화된 예약 시스템

### 핵심 특징
- 🔐 **구글 OAuth + 전화번호 인증** (SMS)
- 📱 **PWA 웹앱** (홈화면 추가, 실시간 알림)
- 🔧 **직관적인 관리자 시스템** (예약/기기/회원 통합 관리)
- ⚡ **실시간 동기화** (Supabase Realtime)
- 🎮 **리듬게임 전문 오락실** (제조사별 관리, 기종별 2P 등)
- 🕐 **KST 타임존 고정**: 모든 시간 처리는 한국 표준시(KST) 기준
  - 서버/클라이언트 모두 KST로 통일
  - created_at 등 타임스탬프도 KST로 표시
- 🔒 **AI 기반 보안**: 비속어 필터링 및 스팸 차단
- 💬 **카카오톡 1:1 채팅 문의**: https://open.kakao.com/o/sJPbo3Sb

### 커뮤니티 채널
- **X (구 트위터)**: 최신 소식과 이벤트 정보 공유
- **YouTube**: 매장 내 방송기기를 통한 실시간 게임 방송 송출
- **카카오톡 오픈챗**: 커뮤니티 친목 및 정보 교류 (https://open.kakao.com/o/gItV8omc)
- **Discord**: 게이머 친목 교류 공간

---

## 🏗️ 기술 스택

### Frontend
- **React** (PWA 지원)
- **Tailwind CSS** (모바일 우선 반응형)
- **Supabase Client** (실시간 DB 연동)

### Backend & Database
- **Supabase** (PostgreSQL + Realtime + Storage)
- **SMS 인증 서비스** (전화번호 인증)
- **구글 OAuth** (인증)
- **AI 필터링 시스템** (비속어/스팸 차단)

### 배포 & 호스팅
- **Vercel** (Frontend 호스팅)
- **GitHub Actions** (크론잡 - 무료)
  - 10분마다 기기 상태 자동 업데이트
  - 매일 Supabase 활성화 유지
- **커스텀 도메인** 연결

---

## 👥 사용자 인증 & 권한

### 인증 프로세스
1. **구글 OAuth 로그인** (ONLY 구글)
2. **Firebase FCM 전화번호 인증** (SMS)
3. **인증 완료** → 모든 기능 이용 가능

### 사용자 권한
| 권한 | 접근 가능 기능 |
|------|----------------|
| **일반 사용자** | 예약 신청, 마이페이지, 정보 조회 |
| **스태프** | 예약 조회, 기기현황 확인 (읽기 전용) |
| **관리자** | 모든 기능 + 체크인 + 계좌정보 관리 |

---

## 🎯 핵심 기능 요약

### 1. 📝 예약 신청 시스템
- 24시간 룰 적용된 예약 신청
- 실시간 예약 가능 여부 체크
- 1인 1대 원칙 (기기 번호 선택)
- 마이마이 2P 옵션 (+10,000원)
- 관리자 수동 승인/거절
- **시간 표시 체계**: 익일 새벽 0~5시는 24~29시로 표시
  - 예: 밤샘 시간대 22:00~05:00 → 22시~29시
  - 연속적인 시간대 인식을 위한 표시 방법
- **예약 번호 시스템**: 간단하고 기억하기 쉬운 형식
  - 형식: YYMMDD-NNN (예: 250701-001)
  - 날짜 기반 순차 번호로 관리 편의성 향상
- **예약 내역 관리**
  - 페이지네이션 적용 (10개씩 표시)
  - 상단 고정 필터링 및 페이지 이동
  - 상태별 필터: 전체, 대기중, 승인됨, 완료, 취소
  - 예약 정보 표시: 기기명, 모델명(있는 경우), 날짜, 시간, 금액, 크레딧 타입
  - 클라이언트 사이드 필터링으로 전체 개수 유지
- **예약 시간 표시**
  - 기본: "7월 1일 (화) 24시-28시 (4시간)"
  - 시작-종료 시간과 총 이용시간을 함께 표시
  - 밤샘 시간대는 정액 요금 적용
- **가격 정책**
  - 일반 시간대: 시간당 요금 × 이용시간
  - 밤샘 시간대: 정액 요금 (시간 무관)
  - 예: 마이마이 밤샘 2인 = 25,000원(기본) + 10,000원(2P) = 35,000원
- **예약 가능 기기 실시간 확인**
  - pending(대기), approved(승인), checked_in(체크인) 상태의 예약이 있는 기기는 선택 불가
  - 시간대별로 예약된 기기 제외하여 표시
  - maintenance(점검중), broken(사용불가) 상태 기기 제외
  - 모델명이 있는 기기는 "기종명 모델명 : #번기" 형식으로 표시
- **예약 신청 UX 개선**
  - 선택 즉시 다음 단계로 자동 진행
  - 상단에 이전 버튼 배치
  - 스텝 인디케이터 클릭으로 단계 이동
- **크레딧 타입 시스템**
  - 고정크레딧 (fixed): 정해진 크레딧 개수
  - 프리플레이 (freeplay): 시간내 자유 플레이
  - 무한크레딧 (unlimited): 무제한 플레이

### 2. ✅ 체크인 & 결제 시스템
- 기기 번호 자동 배정
- **간소화된 계좌이체 시스템**: 계좌번호 보기 링크 제공
  - 체크인 시 계좌이체 선택하면 '계좌번호 보기' 링크 표시
  - 입금 확인 시에도 '계좌번호 확인하기' 링크 제공
  - 고객이 필요할 때만 계좌정보 확인 (자주 이용하는 고객은 이미 저장)
- 현금/계좌이체 결제 지원
- **실제 이용시간 관리 시스템**
  - 예약 시간과 별개로 실제 시작/종료 시간 기록
  - 관리자가 시작/종료 시간 수동 조정 가능
  - 지각, 연장, 조기종료 등 유연한 대응
  - 실제 이용시간 기준 정산 가능

### 3. 🎮 기기 관리 시스템 (2개 시스템 분리)
- **기기 관리**: 전체 오락실 기기 관리
  - 3단계 계층 구조 관리
    * 카테고리: SEGA, KONAMI, BANDAI NAMCO 등 제조사별 분류
    * 기종: 마이마이 DX, 사운드 볼텍스 등 게임기 종류
    * 개별 기기: 각 기종의 실제 기기 번호 (#1, #2, #3...)
  - 기종 정보 입력 필드
    * 기종명 (필수): 예) 마이마이 DX
    * 플레이 모드별 가격: 동적 추가/삭제 가능
    * 대여 가능 여부: 체크박스
    * 총 보유대수: 기종 추가 시 입력한 대수만큼 개별 기기 자동 생성
  - 개별 기기 정보 입력 필드 (기기별로 설정)
    * 모델명: 예) VALKYRIE model, LIGHTNING model (기체 모델명, 선택사항)
    * 버전명: 예) EXCEED GEAR, BISTROVER (게임 버전명, 선택사항)
  - 기기 정보 등록 및 수정
  - 대여가능여부 on/off 체크만 가능
  - 기기 타입별 그룹화 (제조사 태그 표시)
  - 일반 플레이 요금 정보
  - 개별 기기 상태 관리 시스템
    * 보유대수 입력 시 N개의 개별 기기 자동 생성 (#1, #2, #3...)
    * 각 기기별 상태 변경 가능
      - available (사용가능): 예약 가능한 상태
      - in_use (대여중): 현재 대여 중인 상태
      - maintenance (점검중): 점검/수리 중으로 예약 불가
      - broken (고장): 고장으로 사용 불가
    * 모델명과 버전명은 기종 레벨에서 관리 (개별 기기가 아닌 기종 레벨)
    * 체크인 시 자동으로 in_use 상태로 변경
    * 예약 종료 시간에 자동으로 available로 복구 (GitHub Actions 크론잡으로 10분마다 실행)
    * **관리자 페이지에서 상태 변경 시 저장 버튼 없이 즉시 반영**
- **기기 현황 페이지**
  - 카테고리별 탭 구성
  - 기기별 모드/가격 표시
  - 실시간 대여가능 상태 표시
  - 관리자 설정 순서대로 표시
- **대여기기 관리**: 대여가능 체크된 기기들의 세부 설정
  - 시간대별 가격 (기종별로 다른 시간대 설정)
  - 크레딧 옵션별 가격
  - 대여 가능 대수 제한 (n대 중 m대만)
  - 플레이 모드 관리
    * 각 기종별로 다른 플레이 모드 설정 가능
    * 모드명과 가격을 동적으로 추가/삭제
    * 예: 스탠다드 500원, DX 모드 1000원
  - 대여 가능 대수 설정
    * 전체 보유 대수와 별개로 대여 가능 대수 제한
    * 예: 마이마이 4대 보유 중 3대만 대여 가능
  - 순서 변경 기능
  - 대여 종류별 가격 설정
  - **관리자 페이지에서 설정 변경 시 저장 버튼 없이 즉시 반영**

### 4. 📝 콘텐츠 관리 시스템
- 홈페이지, 오락실 이용안내, 예약 이용안내, 대여안내 페이지 편집
- 실시간 편집 및 즉시 반영
- 모바일 미리보기
- 영업시간, 요금표, FAQ 등 동적 콘텐츠 관리
- **안내사항 관리**
  - 예약 안내사항: 예약 페이지 하단 표시
  - 기기 현황 안내사항: 기기 목록 하단 표시
  - 순서 변경 기능
  - 활성/비활성 토글

### 5. 📅 운영 일정 관리
- 특별 운영 시간 설정 (공휴일, 이벤트 등)
- 조기 영업, 밤샘 영업, 조기 마감 관리
- 예약 제한 설정 (특정 날짜/기간)
- 캘린더 뷰로 직관적 관리
- **운영 일정 등록 개선**
  - 시간 선택을 30분 단위로 설정
  - 제목 필드 제거, 설명만 사용 (선택사항)
  - 일정 유형별 자동 분류 (특별 운영, 조기 영업, 밤샘 영업 등)
  - "조기 오픈"을 "조기 영업"으로 용어 통일

### 6. 📊 관리자 통계 & 데이터 관리
- 실시간 현황 대시보드
- 기간별/기기별/고객별 분석
- 엑셀/CSV/구글시트 연동
- 정산 시스템 호환
- **예약 관리 개선**
  - 페이지네이션 적용 (10개씩 표시)
  - 상단 고정 헤더로 필터/검색 항상 접근 가능
  - 거절 → 취소로 용어 변경
  - 취소 사유 선택 옵션 제공
  - 상태별 필터링 시 전체 개수 유지
  - 탭 형식의 상태 필터 (전체, 승인 대기, 승인됨, 취소됨, 완료됨)

### 7. 👥 고객 검색 & 관리
- 이름/전화번호/이메일/닉네임 검색
- 24시간 이내 수동 예약/취소 (관리자 권한)
- 이메일 기반 블랙리스트 관리

### 8. 📱 알림 시스템
- 예약 승인/거절 즉시 알림
- 계좌이체 요청 실시간 알림
- 대여 1시간 전 리마인더
- 관리자 신규 예약 알림
- SMS 인증 코드 발송

---

## 🚀 개발 일정 (6-7주)

### 1단계: 기본 인프라 (1주)
- Supabase 프로젝트 설정 및 DB 스키마 구축
- 구글 OAuth + SMS 인증 연동
- 기본 페이지 구조 및 라우팅 설정
- Tailwind 반응형 디자인 기본 구조

### 2단계: 핵심 예약 기능 (2주)
- 24시간 룰 적용된 예약 신청 플로우
- 실시간 예약 가능 여부 체크 시스템
- 관리자 승인/거절 시스템
- FCM 알림 기본 기능 (승인/거절)

### 3단계: 관리자 시스템 (2주)
- 분리된 기기 관리 + 대여 관리 시스템
- 체크인 & 계좌이체 알림 시스템
- 기기 및 대여 순서 관리
- 예약 제한 설정 (단일/기간)

### 4단계: 고급 기능 (1-2주)
- 마이페이지 & 개인 통계
- 관리자 통계 & 데이터 내보내기
- 콘텐츠 관리 시스템
- 고객 검색 & 블랙리스트 관리

### 5단계: 최적화 & 배포 (1주)
- PWA 기능 완성 (홈화면 추가, 오프라인 지원)
- 성능 최적화 및 에러 처리 강화
- 사용자 테스트 및 버그 수정
- Vercel 배포 및 도메인 연결

---

## 💰 예상 비용

### 개발 비용
| 항목 | 비용 | 기간 |
|------|------|------|
| **Claude Max 플랜** | $100/월 | 2개월 = $200 |
| **도메인 등록** | $15/년 | - |
| **기타 (Supabase, SMS 인증, Vercel)** | 프리 티어 무료 | - |
| **총 개발 비용** | **~$215** | - |

### 월간 운영 비용
| 항목 | 비용 | 비고 |
|------|------|------|
| **Claude Pro** | $20/월 | 유지보수용 |
| **Supabase** | $0-25/월 | 프리 → 필요시 Pro |
| **SMS 인증** | $0-10/월 | 프리 → 필요시 유료 |
| **도메인** | $1.25/월 | 연간 요금 분할 |
| **Vercel** | $0/월 | 프리 티어 |
| **총 운영비** | **$21-56/월** | - |

---

## 🎯 기대 효과

### 고객 측면
- 🕐 **24/7 예약**: 언제든 편리한 예약 신청
- 👀 **투명한 현황**: 실시간 기기 상태 확인
- 💳 **간편 결제**: 계좌이체 원터치 복사
- 📊 **개인 통계**: 이용 패턴으로 만족도 향상
- 📱 **모바일 최적화**: 앱처럼 편리한 사용성

### 운영 측면
- ⚡ **효율성 증대**: 체계적인 예약 관리로 업무 간소화
- 📈 **매출 분석**: 상세 통계로 경영 인사이트 확보
- 👥 **고객 관리**: 블랙리스트, 단골 고객 체계적 관리
- 🔧 **유연한 운영**: 실시간 영업시간/제한 변경
- 📝 **콘텐츠 자율성**: 비개발자도 쉬운 페이지 관리

### 차별화 포인트
- 🎮 **리듬게임 전문**: 제조사별 분류 (SEGA, KONAMI, Bandai Namco 등)
- 🔔 **실시간 소통**: 즉시 알림으로 소통 혁신
- 🏦 **혁신적 결제**: 계좌이체 알림 + 백업 시스템 (업계 최초급)
- 📱 **모바일 네이티브**: 99% 모바일 환경 완볍 최적화
- 🔧 **운영 자율성**: 노코드로 실시간 관리 + 현장 유연성
- 💡 **현실적 설계**: 대여 가능/불가 기종 분리 + 일반 플레이 요금 표시
- 🔢 **개별 기기 관리**: 기종별 보유대수 관리 및 개별 상태 추적 시스템
- 🔒 **AI 기반 보안**: 한국어/영어 특화 비속어 필터 및 스팸 차단

---

## 🎉 프로젝트 시작 준비 완료!

**✅ 기획 완료** - 완전한 기능 명세서
**✅ 플로우 완료** - 사용자 + 관리자 플로우차트
**✅ DB 설계 완료** - 상세 스키마 정의
**✅ 개발 일정 완료** - 단계별 로드맵

**🚀 다음 단계**: Claude Max 플랜 구독 → 개발 시작

---

**문서 버전**: 3.8 (2025.01.08 업데이트)
- 예약 목록 필터링 개선 (전체 개수 유지)
- 관리자 예약 관리 페이지 상단 고정 기능
- 운영 일정 관리 섹션 추가 및 개선
- 시간 선택 30분 단위, 제목 제거, "조기 영업" 용어 통일
- 모델명/버전명 관리를 기종 레벨로 이동 (개별 기기 레벨에서 제거)
- 카카오톡 1:1 채팅 링크 추가: https://open.kakao.com/o/sJPbo3Sb
- 커뮤니티 채널 정보 추가 (X, YouTube, 카카오톡 오픈챗, Discord)
**최종 수정**: 2025년 7월 8일
**기획자**: 광주 게임플라자 & Claude
**개발 예정 기간**: 6-7주
**예상 총 비용**: ~$215 (개발) + $21-56/월 (운영)