# 광주 게임플라자 사용자 플로우

## 🔐 사용자 인증 플로우

```
사용자 접속
    ↓
로그인 상태 확인
    ↓
┌─────────────────┬─────────────────┐
│    미로그인      │    로그인됨      │
│        ↓        │        ↓        │
│ 구글 로그인 버튼  │ 전화번호 인증 확인 │
│        ↓        │        ↓        │
│ 구글 OAuth 인증  │ ┌─────┬─────┐   │
│        ↓        │ │미인증│인증완료│ │
│ ─────────────── │ │  ↓  │  ↓  │   │
└─────────────────┤ │SMS │메인 │   │
                  │ │인증 │기능 │   │
                  │ │  ↓  │접근 │   │
                  │ │인증 │가능 │   │
                  │ │완료 │     │   │
                  │ │  ↓  │     │   │
                  │ └──┴──┴─────┘   │
                  └─────────────────┘
                          ↓
                   메인 기능 접근 가능
```

---

## 📝 예약 신청 플로우

```
메인 기능 접근
    ↓
목적 선택
    ↓
┌─────────────┬─────────────┬─────────────┐
│  정보 확인   │  예약 신청   │  정보 습득   │
│      ↓      │      ↓      │      ↓      │
│기기현황/일정 │ 대여신청페이지│대여안내/이용안내│
│   페이지    │             │    페이지    │
└─────────────┴─────────────┴─────────────┘
                    ↓
            예약 가능 날짜 캘린더 표시
            (24시간 미만 날짜 비활성화)
                    ↓
               예약 제한 확인
                    ↓
        ┌─────────┬─────────┬─────────┐
        │ 종일제한 │ 조기제한 │ 밤샘제한 │
        │    ↓    │    ↓    │    ↓    │
        │해당날짜  │조기대여  │밤샘대여  │
        │선택불가  │시간대   │시간대   │
        │비활성화  │비활성화  │비활성화  │
        └─────────┴─────────┴─────────┘
                    ↓
                날짜 선택
                    ↓
          해당 날짜 시간대 목록 표시
                    ↓
               시간대 선택
                    ↓
        예약 가능 기기 목록 로드
        (관리자가 설정한 순서대로)
                    ↓
            기기 선택 (단일 선택)
                    ↓
        해당 기기 사용가능 번호 목록 표시
                    ↓
          기기 번호 선택 (1대만)
                    ↓
              마이마이 선택?
                    ↓
        ┌─────────────┬─────────────┐
        │   마이마이   │   다른 기기   │
        │      ↓      │      ↓      │
        │플레이어 수   │실시간 가격   │
        │선택(1인/2인) │ 계산 표시   │
        │      ↓      │             │
        │  2인 플레이  │             │
        │  선택 여부   │             │
        │      ↓      │             │
        │ ┌───┬───┐   │             │
        │ │1인│2인│   │             │
        │ │ ↓ │ ↓ │   │             │
        │ │가격│+10K│  │             │
        │ │계산│추가│  │             │
        │ └───┴───┘   │             │
        └─────────────┴─────────────┘
                    ↓
            실시간 가격 계산 표시
                    ↓
        특별 요청사항 입력 (선택)
                    ↓
         작성 중 24시간 미만 확인
                    ↓
        ┌─────────────┬─────────────┐
        │24시간 미만됨 │ 24시간 이상  │
        │      ↓      │      ↓      │
        │예약 불가    │최종 예약 정보│
        │메시지      │ 확인 화면   │
        │관리자 연락  │             │
        │안내        │             │
        │      ↓      │             │
        │처음부터    │             │
        │다시 시작    │             │
        └─────────────┘             │
                                   ↓
                     예약 안내사항 표시
                     (관리자 노코드 편집 가능)
                                   ↓
                        안내사항 예시:
                    - 밤샘대여시 23:45 이전 결제필수
                    - 24시간 전까지 취소 가능
                    - 지각시 미리 연락 요망
                    - 기타 관리자 설정 내용
                                   ↓
                        최종 확인 버튼
                                   ↓
                        예약 신청 완료
                                   ↓
                해당 시간대 '예약신청중' 상태로 변경
                                   ↓
                 신청 번호 발급 및 FCM 알림
```

---

## 📅 정보 확인 플로우

```
기기현황/일정 페이지 접속
    ↓
캘린더/리스트/기기현황 탭 선택
    ↓
예약 현황 확인
    ↓
예약 가능 여부 확인
    ↓
┌─────────────┬─────────────┐
│    가능     │   불가능     │
│     ↓       │     ↓       │
│ 대여신청    │ 다른 날짜/   │
│ 페이지로    │ 시간 확인   │
│ 이동       │     ↓       │
│           │ 캘린더/리스트│
│           │ 뷰로 돌아감  │
└─────────────┴─────────────┘
```

---

## 👤 마이페이지 플로우

```
마이페이지 접속
    ↓
개인 정보 확인
- 구글 계정 정보
- 인증된 전화번호
- 블랙리스트 상태 (해당시)
    ↓
현재 예약 관리
    ↓
┌─────────────┬─────────────┐
│ 예약 내역   │  취소 기능   │
│   확인     │ (24시간 전)  │
│     ↓       │     ↓       │
│ 승인대기/   │   예약취소   │
│ 확정예약   │   처리      │
│   상태     │             │
└─────────────┴─────────────┘
    ↓
개인 통계 확인
- 총 이용 횟수
- 즐겨 사용하는 기기
- 총 이용 시간
- 월별 이용 통계
```

---

## 🚨 예외 상황 처리

### 예약 승인 결과
```
예약 신청 완료
    ↓
관리자 검토 대기
    ↓
승인 결과 FCM 알림
    ↓
┌─────────────┬─────────────┐
│    승인     │    거절     │
│     ↓       │     ↓       │
│  방문 준비   │ 다시 신청   │
│     ↓       │ 또는 포기   │
│ 예약시간에   │     ↓       │
│   방문?     │ 대여신청    │
│     ↓       │ 페이지로    │
│ ┌────┬────┐ │             │
│ │정시│지각│ │             │
│ │방문││노쇼│ │             │
│ │ ↓ ││ ↓ │ │             │
│ │체크│지각│ │             │
│ │인 ││처리│ │             │
│ └────┴────┘ │             │
└─────────────┴─────────────┘
```

---

## 🔄 실시간 업데이트 플로우

```
예약/체크인 상태 변경
    ↓
실시간 기기 현황 업데이트
    ↓
웹사이트 기기현황 탭 반영
    ↓
예약 가능 수량 재계산
    ↓
다른 사용자들에게 
실시간으로 현황 업데이트
```

---

## 📱 PWA 알림 플로우

```
사용자 액션 발생
    ↓
Firebase FCM 서버로 알림 요청
    ↓
사용자 디바이스로 푸시 알림 전송
    ↓
┌─────────────┬─────────────┐
│ 앱이 열려있음│ 앱이 닫혀있음│
│      ↓      │      ↓      │
│ 인앱 알림   │ 시스템 알림  │
│ 표시       │ 배너 표시   │
│           │      ↓      │
│           │ 알림 클릭시  │
│           │ 앱 자동 열림 │
└─────────────┴─────────────┘
    ↓
해당 페이지로 자동 이동
(예: 계좌이체 화면, 마이페이지 등)
```

사용자가 경험하는 모든 플로우가 체계적으로 정리된 문서입니다.