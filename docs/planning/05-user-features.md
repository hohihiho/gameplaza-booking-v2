# 5. 사용자 기능 명세

## 5.1 회원가입 및 로그인

### 5.1.1 Google OAuth 로그인
- **구현**: Better Auth + Google OAuth
- **프로세스**:
  1. "Google로 로그인" 버튼 클릭
  2. Google 계정 선택
  3. 권한 동의 (이메일, 프로필 정보)
  4. 자동 회원가입 또는 로그인
  5. 마이페이지로 리디렉션

### 5.1.2 사용자 정보 수집
- **필수 정보**: 
  - 이메일 (Google에서 자동 수집)
  - 이름 (Google에서 자동 수집)
- **선택 정보**:
  - 전화번호 (예약 알림용)
  - 마케팅 수신 동의

### 5.1.3 세션 관리
- **Better Auth 세션**:
  - JWT 토큰 기반
  - 30일 유효 기간
  - 자동 갱신 지원
  - 보안 쿠키 저장

## 5.2 예약 시스템

### 5.2.1 기기 목록 조회
- **실시간 상태 표시**:
  - 사용 가능 (초록색)
  - 사용 중 (빨간색)
  - 예약됨 (노란색)
  - 점검 중 (회색)

### 5.2.2 예약 생성
- **입력 정보**:
  - 기기 선택
  - 날짜 선택 (오늘 ~ 7일 후)
  - 시간 선택 (1시간 단위)
  - 이용 시간 (1~3시간)

- **검증 로직**:
  - 중복 예약 방지
  - 1일 최대 3시간 제한
  - 영업시간 내 예약만 가능
  - 과거 시간 예약 불가

### 5.2.3 예약 관리
- **예약 조회**:
  - 예정된 예약
  - 진행 중 예약
  - 완료된 예약
  - 취소된 예약

- **예약 수정**:
  - 시간 변경 (24시간 전까지)
  - 기기 변경 (가능한 경우)

- **예약 취소**:
  - 1시간 전까지 무료 취소
  - 노쇼 3회 시 7일 이용 제한

## 5.3 체크인/체크아웃

### 5.3.1 체크인 프로세스
1. 예약 시간 30분 전 알림
2. QR 코드 생성
3. 현장 QR 스캔 또는 수동 체크인
4. 기기 배정 및 활성화
5. 이용 시작

### 5.3.2 체크아웃 프로세스
1. 종료 10분 전 알림
2. 연장 가능 여부 확인
3. 체크아웃 처리
4. 기기 상태 "청소 중"으로 변경
5. 이용 완료

### 5.3.3 자동 처리
- **노쇼 처리**: 예약 시간 15분 경과 시
- **자동 체크아웃**: 이용 시간 종료 시
- **기기 상태 복구**: 체크아웃 5분 후

## 5.4 실시간 기능

### 5.4.1 실시간 상태 업데이트
- **SSE (Server-Sent Events)**:
  - 기기 상태 변경
  - 예약 상태 변경
  - 대기 순서 변경

### 5.4.2 알림 시스템
- **푸시 알림**:
  - 예약 30분 전
  - 체크인 요청
  - 종료 10분 전
  - 예약 취소/변경

- **이메일 알림**:
  - 예약 확정
  - 예약 변경
  - 예약 취소

## 5.5 마이페이지

### 5.5.1 프로필 관리
- 기본 정보 수정
- 전화번호 추가/변경
- 마케팅 수신 설정
- 알림 설정

### 5.5.2 이용 내역
- 월별 이용 통계
- 총 이용 시간
- 즐겨찾는 기기
- 이용 패턴 분석

### 5.5.3 예약 내역
- 전체 예약 목록
- 필터링 (기간, 상태, 기기)
- 예약 상세 정보
- 영수증 다운로드

## 5.6 모바일 최적화

### 5.6.1 반응형 디자인
- **브레이크포인트**:
  - 모바일: 320px ~ 768px
  - 태블릿: 769px ~ 1024px
  - 데스크톱: 1025px ~

### 5.6.2 터치 최적화
- 최소 터치 영역: 44x44px
- 스와이프 제스처 지원
- 바텀 시트 UI
- 플로팅 액션 버튼

### 5.6.3 성능 최적화
- 이미지 lazy loading
- 무한 스크롤 페이지네이션
- 오프라인 캐싱
- 3G 네트워크 대응

## 5.7 접근성

### 5.7.1 WCAG 2.1 AA 준수
- 색상 대비 4.5:1 이상
- 키보드 네비게이션
- 스크린 리더 지원
- 포커스 인디케이터

### 5.7.2 다국어 지원
- 한국어 (기본)
- 영어 (준비 중)
- 언어 자동 감지

## 5.8 보안

### 5.8.1 인증 보안
- HTTPS 전용
- JWT 토큰 암호화
- CSRF 토큰 검증
- Rate limiting

### 5.8.2 데이터 보호
- 개인정보 암호화
- 민감 정보 마스킹
- 로그 익명화
- GDPR 준수