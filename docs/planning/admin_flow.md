# 광주 게임플라자 관리자 플로우

## 🔐 관리자 로그인 및 권한

```
관리자/스태프 로그인
    ↓
권한 확인
    ↓
┌─────────────────┬─────────────────┐
│     관리자       │     스태프       │
│       ↓         │       ↓         │
│ 전체 관리 대시보드│ 제한된 대시보드   │
│                │ (예약조회,      │
│                │ 기기현황만)     │
└─────────────────┴─────────────────┘
```

---

## 🎛️ 관리자 메인 대시보드

```
전체 관리 대시보드
    ↓
관리 기능 선택
    ↓
┌─────────┬─────────┬─────────┬─────────┐
│ 예약관리 │ 체크인  │ 기기관리 │ 대여관리 │
│    ↓    │   ↓     │   ↓     │   ↓     │
│예약승인  │결제처리 │기기상태 │가격설정 │
│거절처리  │계좌이체 │순서관리 │시간설정 │
└─────────┴─────────┴─────────┴─────────┘
    ↓
┌─────────┬─────────┬─────────┬─────────┐
│콘텐츠관리│통계분석 │고객관리 │시스템설정│
│    ↓    │   ↓     │   ↓     │   ↓     │
│노코드   │매출분석 │검색관리 │예약제한 │
│빌더편집  │데이터   │블랙리스트│영업시간 │
│        │내보내기  │        │        │
└─────────┴─────────┴─────────┴─────────┘
```

---

## 📋 예약 관리 플로우

```
예약 관리 시스템 접속
    ↓
신규 예약 신청 목록 확인
    ↓
예약 상세 정보 확인
- 고객 정보 (이름, 연락처)
- 예약 일시 및 시간대
- 선택 기기 및 대수
- 특별 요청사항
    ↓
승인/거절 결정
    ↓
┌─────────────────┬─────────────────┐
│      승인       │      거절       │
│       ↓         │       ↓         │
│ 기기 번호 자동   │ 거절 사유 입력   │
│ 배정 처리       │       ↓         │
│ (순서대로 배정)  │ 거절 처리 및    │
│       ↓         │ FCM 알림 발송   │
│ 승인 처리 및    │       ↓         │
│ FCM 알림 발송   │ 예약신청중     │
│       ↓         │ 상태 해제      │
│ 기기 가예약     │               │
│ 상태 변경       │               │
└─────────────────┴─────────────────┘
```

---

## ✅ 체크인 시스템 플로우

```
체크인 시스템 접속
    ↓
승인된 예약 목록 확인
    ↓
고객 도착 시 신원 확인
    ↓
배정된 기기 번호 안내
    ↓
결제 방식 선택
    ↓
┌─────────────────┬─────────────────┐
│      현금       │    계좌이체      │
│       ↓         │       ↓         │
│ 현금 수령 체크   │ 고객이 직접     │
│       ↓         │ 계좌이체 처리   │
│ 체크인 완료     │       ↓         │
│     처리       │ '계좌번호 보기'  │
│               │ 링크 제공       │
│               │ (필요시에만)    │
│               │       ↓         │
│               │ 체크인 완료     │
│               │ (결제 대기)     │
│               │       ↓         │
│               │ 은행앱에서      │
│               │ 입금 확인 후    │
│               │ '입금 확인'     │
│               │ 버튼 클릭       │
│               │       ↓         │
│               │ 결제 완료 처리   │
└─────────────────┴─────────────────┘
    ↓
기기 상태 자동으로 '대여중(rental)'으로 변경
    ↓
대여 시작/종료 시간 기록
    ↓
실시간 현황 업데이트
    ↓
┌─────────────────────────────────────┐
│ 이용 중 시간 조정 (필요시)           │
│       ↓                             │
│ 체크인된 예약에서 '시간 조정' 버튼   │
│       ↓                             │
│ 시간 조정 모달 오픈                  │
│       ↓                             │
│ 시작/종료 시간 입력                 │
│ - 시작 시간: [14:10]                │
│ - 종료 시간: [16:30]                │
│       ↓                             │
│ 조정 사유 선택 (필수)               │
│ □ 관리자 지각                      │
│ □ 시스템 오류                      │
│ □ 고객 요청 연장                   │
│ □ 조기 종료                        │
│ □ 기타 (직접 입력)                 │
│       ↓                             │
│ 예상 요금 변동 실시간 표시          │
│ - 실제 이용시간: 2시간 20분         │
│ - 조정된 금액: ₩15,000             │
│       ↓                             │
│ 변경 사항 저장                      │
│       ↓                             │
│ DB 업데이트 및 이력 기록            │
│ - actual_start_time 업데이트        │
│ - actual_end_time 업데이트          │
│ - adjusted_amount 계산 및 저장      │
│ - time_adjustments 테이블에 이력    │
└─────────────────────────────────────┘
    ↓
예약 종료 시간 도래 시 자동으로 '사용가능(available)'로 복구
```

---

## 🎮 기기 관리 시스템

```
기기 관리 시스템 접속
    ↓
3단계 계층 구조 관리
    ↓
┌─────────────┬─────────────┬─────────────┐
│  카테고리     │   기종       │  개별 기기   │
│     ↓        │     ↓        │      ↓      │
│ 제조사별     │ 게임기 종류  │  기기 번호   │
│ 분류 관리    │ 및 정보     │   관리      │
│ (SEGA,       │ (마이마이 DX,│  (#1, #2,   │
│ KONAMI,      │ 사운드볼텍스)│   #3...)    │
└─────────────┴─────────────┴─────────────┘
    ↓
기종 정보 입력
    ↓
┌─────────────┬─────────────┬─────────────┬───────────┐
│ 기종명(필수) │ 모델명/버전 │ 플레이 모드 │ 보유대수   │
│     ↓        │     ↓        │      ↓      │     ↓      │
│마이마이 DX    │ 발키리/     │ 동적 관리   │ 4대 입력  │
│             │ 구기체       │ (모드명+    │     ↓      │
│             │             │  가격 설정) │ #1~#4     │
│             │             │             │ 자동생성  │
└─────────────┴─────────────┴─────────────┴───────────┘
    ↓
기기 관리 작업 선택
    ↓
┌─────────┬─────────┬─────────┬─────────┐
│기종 추가 │기종 편집 │순서 변경 │상태 관리 │
│   ↓     │   ↓     │   ↓     │   ↓     │
│새 기종  │기종정보 │드래그앤  │개별기기 │
│등록     │수정     │드롭순서 │상태변경 │
│기종/모드│       │조정     │        │
│요금/대수│       │        │        │
│   ↓     │   ↓     │   ↓     │   ↓     │
│보유대수 │변경사항 │변경사항 │기기상태 │
│입력·생성│저장    │저장    │선택    │
└─────────┴─────────┴─────────┴─────────┘
    ↓
기기 상태 선택 (상태 관리시)
    ↓
┌────────────┬────────────┬────────────┐
│  사용가능   │  사용중    │   점검중    │
│(available)  │  (in_use)  │(maintenance)│
│     ↓       │     ↓       │      ↓      │
│  예약가능   │  현재사용  │  점검/수리  │
│   상태      │  표시만    │  (예약차단) │
└────────────┴────────────┴────────────┘
    ↓
대여 가능 여부 설정 (체크박스)
    ↓
대여가능 기기 목록 업데이트
```

---

## 💰 대여기기 관리 시스템

```
대여기기 관리 시스템 접속
    ↓
대여가능 체크된 기기 목록
(기기관리에서 연동)
    ↓
대여 설정 작업 선택
    ↓
┌───────────┬───────────┬───────────┬───────────┐
│시간대설정  │대여대수설정│가격설정   │순서관리   │
│    ↓      │    ↓      │    ↓      │    ↓      │
│기종별로   │n대 중 m대 │시간대별   │드래그앤   │
│다른 시간대│대여가능   │가격 설정  │드롭으로  │
│설정 가능  │(예:마이마이│          │순서변경   │
│    ↓      │4대 중 3대)│    ↓      │          │
│밤샘대여   │    ↓      │크레딧     │          │
│회사별     │각 기종별  │옵션별    │          │
│점검시간   │대여가능   │가격설정   │          │
│차이 반영  │대수 설정   │          │          │
└───────────┴───────────┴───────────┴───────────┘
    ↓
플레이 모드 관리
    ↓
┌───────────────────────────────────────┐
│ 각 기종별로 다른 플레이 모드 설정 가능     │
│              ↓                           │
│ 모드명과 가격 동적 추가/삭제              │
│              ↓                           │
│ 예: 스탠다드 500원, DX 모드 1000원       │
└───────────────────────────────────────┘
    ↓
대여 가능 대수 설정
    ↓
┌───────────────────────────────────────┐
│ 전체 보유 대수와 별개로 대여 가능 대수 제한   │
│              ↓                           │
│ 예: 마이마이 4대 보유 중 3대만 대여 가능    │
└───────────────────────────────────────┘
    ↓
설정 저장 및 예약시스템 반영
```

---

관리자가 사용하는 모든 워크플로우가 체계적으로 정리된 문서입니다.